{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/chand/OneDrive/Desktop/jeevic_admin/app/contact-messages/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { Breadcrumb } from \"@/components/breadcrumb\"\r\nimport { APISDK } from \"@/libs/api\"\r\nimport { Search, Trash2 } from \"lucide-react\"\r\nimport { usePopup } from \"@/context/popup-context\"\r\n\r\ninterface ContactMessage {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  message: string;\r\n  created_at: string;\r\n  is_read: boolean;\r\n  updated_at?: string;\r\n}\r\n\r\nexport default function ContactMessagesPage() {\r\n  const [messages, setMessages] = useState<ContactMessage[]>([])\r\n  const [searchTerm, setSearchTerm] = useState(\"\")\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const { showPopup, showConfirm } = usePopup()\r\n\r\n  useEffect(() => {\r\n    fetchMessages()\r\n  }, [])\r\n\r\n  const fetchMessages = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\")\r\n      if (!token) {\r\n        throw new Error(\"No access token found\")\r\n      }\r\n      const api = APISDK.getInstance(token)\r\n      const response = await api.getContactMessages()\r\n      console.log(\"Response from API:\", response)\r\n      \r\n      const mappedMessages: ContactMessage[] = response.rows.map(msg => ({\r\n        id: msg.id,\r\n        name: msg.name || 'Anonymous',\r\n        email: msg.email,\r\n        message: msg.message,\r\n        created_at: new Date(msg.created_at).toISOString(),\r\n        is_read: msg.is_read,\r\n        updated_at: msg.updated_at ? new Date(msg.updated_at).toISOString() : undefined\r\n      }))\r\n      \r\n      setMessages(mappedMessages)\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch messages:\", error)\r\n      showPopup(\"Failed to fetch messages\", { type: \"error\" })\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const markAsRead = async (messageId: string) => {\r\n    try {\r\n      const token = localStorage.getItem(\"access_token\")\r\n      if (!token) {\r\n        throw new Error(\"No access token found\")\r\n      }\r\n      const api = APISDK.getInstance(token)\r\n      await api.updateContactMessageStatus(messageId, true)\r\n      showPopup(\"Message marked as read\", { type: \"success\" })\r\n      fetchMessages() // Refresh the list\r\n    } catch (error) {\r\n      console.error(\"Failed to mark message as read:\", error)\r\n      showPopup(\"Failed to mark message as read\", { type: \"error\" })\r\n    }\r\n  }\r\n\r\n  const deleteMessage = async (messageId: string) => {\r\n    showConfirm(\r\n      \"Are you sure you want to delete this message?\",\r\n      async () => {\r\n        try {\r\n          const token = localStorage.getItem(\"access_token\")\r\n          if (!token) {\r\n            throw new Error(\"No access token found\")\r\n          }\r\n          const api = APISDK.getInstance(token)\r\n          await api.deleteContactMessage(messageId)\r\n          showPopup(\"Message deleted successfully\", { type: \"success\" })\r\n          fetchMessages() // Refresh the list\r\n        } catch (error) {\r\n          console.error(\"Failed to delete message:\", error)\r\n          showPopup(\"Failed to delete message\", { type: \"error\" })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  const filteredMessages = messages.filter(message => \r\n    message.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    message.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    message.message.toLowerCase().includes(searchTerm.toLowerCase())\r\n  )\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      \r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Contact Messages</h1>\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search messages...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"pl-10 pr-4 py-2 text-black border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500\"\r\n            />\r\n            <Search className=\"absolute left-3 top-2.5 text-gray-400\" size={20} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className=\"text-center py-8\">Loading messages...</div>\r\n      ) : messages.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500\">No messages found</div>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {messages\r\n            .filter(message => \r\n              message.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n              message.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n              message.message.toLowerCase().includes(searchTerm.toLowerCase())\r\n            )\r\n            .map((message) => (\r\n              <div\r\n                key={message.id}\r\n                className={`bg-white p-4 rounded-lg border ${\r\n                  !message.is_read ? 'border-orange-500' : 'border-gray-200'\r\n                }`}\r\n              >\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                  <div>\r\n                    <h3 className=\"font-medium text-gray-900\">{message.name}</h3>\r\n                    <p className=\"text-sm text-gray-500\">{message.email}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <span className=\"text-sm text-gray-500\">\r\n                      {new Date(message.created_at).toLocaleDateString()}\r\n                    </span>\r\n                    {!message.is_read && (\r\n                      <button\r\n                        onClick={() => markAsRead(message.id)}\r\n                        className=\"text-sm text-orange-500 hover:text-orange-600\"\r\n                      >\r\n                        Mark as read\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{message.message}</p>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"file":"search.js","sources":["file://C%3A/Users/chand/OneDrive/Desktop/jeevic_admin/node_modules/lucide-react/src/icons/search.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n];\n\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Search = createLucideIcon('search', __iconNode);\n\nexport default Search;\n"],"names":[],"mappings":";;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAuB,CAAA,CAAA,CAAA,CAAA;IAClC;QAAC,QAAU,CAAA;QAAA,CAAA;YAAE,EAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAM,CAAI,CAAA,CAAA,CAAA,IAAA,CAAM;YAAA,CAAG,EAAA,CAAA,CAAA,CAAA,CAAA;YAAK,GAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA,CAAU;KAAA,CAAA;IACxD;QAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAQ,CAAA;QAAA,CAAA;YAAE,GAAG,CAAkB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YAAA,CAAA,CAAA,CAAA,CAAA,CAAK;QAAA,CAAU;KAAA;CACjD,CAAA;AAaM,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAS,CAAA,2KAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAU,CAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA","ignoreList":[0],"debugId":null}}]
}