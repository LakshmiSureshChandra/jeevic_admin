(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:c,...d}=r;return(0,a.createElement)(o,{ref:l,iconNode:t,className:n("lucide-".concat(s(i(e))),"lucide-".concat(e),c),...d})});return r.displayName=i(e),r}},46324:(e,t,r)=>{Promise.resolve().then(r.bind(r,66275))},47924:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(19946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},66275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(95155),s=r(12115),l=r(34355),i=r(47924);function n(){var e,t;let[r,n]=(0,s.useState)([]),[c,o]=(0,s.useState)([]),[d,u]=(0,s.useState)(),[m,x]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[h,f]=(0,s.useState)([]),[v,p]=(0,s.useState)([]),[w,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{y(!0);let e=l.$.getInstance(),t=await e.getAllCategories();n(t);let r=[];for(let a of t){let t=await e.getProductByCategoryId(a.id);r=r.concat(t||[])}o(r),y(!1)})()},[]),(0,s.useEffect)(()=>{d&&(async()=>{y(!0);let e=l.$.getInstance();x(await e.getReviewsByProductId(d.id));try{let t=await e.averageRatingsByProductId(d.id);N(null!=t?t:null)}catch(e){N(null)}y(!1)})()},[d]),(0,s.useEffect)(()=>{let e=c;g&&(e=c.filter(e=>{var t;let a=r.find(t=>t.id===e.category_id),s=a?a.name:"";return(null==(t=e.name)?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null==s?void 0:s.toLowerCase().includes(g.toLowerCase()))})),f(e),g&&d?p(m.filter(e=>{var t,r;return(null==(t=e.comment)?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null==(r=e.rating)?void 0:r.toString().includes(g))})):p(m)},[g,c,r,m,d]);let k=async e=>{if(!window.confirm("Are you sure you want to delete this review?"))return;let t=l.$.getInstance();await t.deleteReviewById(e),x(t=>t.filter(t=>t.id!==e))};return(0,s.useEffect)(()=>{d&&!h.some(e=>e.id===d.id)&&(u(void 0),x([]),p([]))},[h,d]),(0,a.jsxs)("div",{className:"p-6 bg-white min-h-screen",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for a Product name, Category, or Review",className:"pl-10 text-black pr-4 py-2 border border-gray-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 w-full bg-white",value:g,onChange:e=>b(e.target.value)}),(0,a.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-4",children:(0,a.jsx)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:h.map(e=>{var t;return(0,a.jsxs)("button",{className:"flex flex-col items-center min-w-[120px] pb-2 px-1 font-medium text-sm whitespace-nowrap transition-colors ".concat((null==d?void 0:d.id)===e.id?"text-black border-b-2 border-black":"text-gray-500 hover:text-black"),style:{borderRadius:"0.5rem",background:(null==d?void 0:d.id)===e.id?"#f5f5f5":"transparent"},onClick:()=>u(e),children:[(0,a.jsx)("img",{src:(null==(t=e.image_url)?void 0:t[0])||"https://i.pinimg.com/474x/15/20/b2/1520b25e509ef0c742551f7aa06a6356.jpg",alt:e.name,className:"w-12 h-12 object-cover rounded-full border border-gray-200 mb-1"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]},e.id)})})}),d&&(0,a.jsx)("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-white",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,a.jsx)("img",{src:(null==(e=d.image_url)?void 0:e[0])||"https://i.pinimg.com/474x/15/20/b2/1520b25e509ef0c742551f7aa06a6356.jpg",alt:d.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-bold text-black",children:d.name}),(0,a.jsx)("div",{className:"text-gray-600 mt-1",children:d.description}),(0,a.jsxs)("div",{className:"text-black font-semibold mt-2 text-base",children:["â‚¹ ",null==(t=d.price)?void 0:t.toLocaleString()]}),null!==j&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-black",children:["Average Rating: ",(0,a.jsx)("span",{className:"font-bold",children:j.toFixed(2)})]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-3 text-black",children:"Reviews"}),w&&(0,a.jsx)("div",{className:"text-gray-500",children:"Loading..."}),!w&&0===v.length&&(0,a.jsx)("div",{className:"text-gray-400 italic",children:"No reviews found."}),(0,a.jsx)("ul",{className:"space-y-4",children:v.map(e=>(0,a.jsxs)("li",{className:"border border-gray-200 rounded-lg p-4 flex justify-between items-center bg-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold text-black flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Rating:"}),(0,a.jsx)("span",{className:"bg-gray-100 text-black px-2 py-0.5 rounded font-bold",children:e.rating})]}),(0,a.jsx)("div",{className:"text-gray-800 mt-1",children:e.comment}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-2",children:new Date(e.created_at).toLocaleString()})]}),(0,a.jsx)("button",{className:"text-red-500 hover:text-white hover:bg-red-500 border border-red-200 px-3 py-1 rounded transition-colors",onClick:()=>k(e.id),children:"Delete"})]},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[997,355,441,684,358],()=>t(46324)),_N_E=e.O()}]);