(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},24547:(e,t,s)=>{Promise.resolve().then(s.bind(s,52049))},41004:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var a=s(95155),r=s(6874),l=s.n(r),n=s(13052);function i(e){let{items:t}=e;return(0,a.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[s>0&&(0,a.jsx)(n.A,{size:16,className:"mx-2 text-black"}),(0,a.jsx)(l(),{href:"#",className:"".concat(s===t.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"),children:e})]},s))})}},49103:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},52049:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(95155),r=s(12115),l=s(41004),n=s(62525),i=s(34355),c=s(94425);function d(e){let{tabs:t,onCategoryDeleted:s}=e,[l,d]=(0,r.useState)(null),{showPopup:o,showConfirm:u}=(0,c.O)();if(!t)return(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})});let m=async(e,a)=>{if(a.stopPropagation(),"all-items"===e)return void o("Cannot delete 'All Items' category",{type:"warning"});try{let a=localStorage.getItem("access_token"),r=i.$.getInstance(a||""),l=(await r.getDishes()).filter(t=>t.dish_category_id===e),n=t.find(t=>t.id===e),c=n?n.name:"this category",m='Are you sure you want to delete "'.concat(c,'"? This will also delete ').concat(l.length," dish").concat(1!==l.length?"es":""," in this category.");u(m,async()=>{d(e);let t=l.map(e=>r.deleteDish(e.id));await Promise.all(t),await r.deleteDishCategory(e),console.log("Deleted category ".concat(e," and ").concat(l.length," associated dishes")),o('Successfully deleted "'.concat(c,'" and ').concat(l.length," associated dishes"),{type:"success"}),s&&await s()},{title:"Delete Category",confirmText:"Delete",cancelText:"Cancel"})}catch(e){console.error("Error deleting category:",e),o("Failed to delete category. Please try again.",{type:"error"})}finally{d(null)}};return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:t.map(e=>(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg cursor-pointer group",children:[(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-110"}),(0,a.jsxs)("div",{className:"absolute inset-0  flex flex-col justify-end p-3",children:[(0,a.jsx)("h3",{className:"text-white font-bold text-lg",children:e.name}),(0,a.jsx)("div",{className:"bg-white text-black rounded-full w-6 h-6 flex items-center justify-center text-xs absolute top-3 right-3",children:e.count}),"all-items"!==e.id&&(0,a.jsx)("button",{onClick:t=>m(e.id,t),disabled:l===e.id,className:"absolute top-3 left-3 p-1.5 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700",title:"Delete category",children:l===e.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(n.A,{size:16})})]})]},e.id))})}function o(e){let{tabs:t,setActiveTab:s,activeTab:r}=e;return t?(0,a.jsx)("div",{className:"border-b mb-6",children:(0,a.jsx)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:t.map(e=>(0,a.jsxs)("button",{className:"pb-2 px-1 font-medium text-sm whitespace-nowrap ".concat(r===e.id?"text-orange-500 border-b-2 border-orange-500":"text-black hover:text-gray-800"),onClick:()=>s(e.id),children:[e.name," ",(0,a.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:e.count})]},e.id))})}):(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})})}var u=s(13052),m=s(84616),x=s(54416),h=s(89917);let g=(0,s(19946).A)("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);function f(e){var t;let{isLoading:s,dishes:l,setDishes:d,categories:o,activeTab:f,refreshData:p,onDishDeleted:b}=e,[y,j]=(0,r.useState)(l),[v,N]=(0,r.useState)({}),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[_,A]=(0,r.useState)(null),[D,L]=(0,r.useState)(null),[T,M]=(0,r.useState)(null),P=(0,r.useRef)(null),[I,E]=(0,r.useState)({name:"",price:0,dish_category_id:"",id:"",is_available:!1,is_non_veg:!1,meta_data:{},picture:"",created_at:new Date,updated_at:new Date}),{showPopup:z,showConfirm:B}=(0,c.O)(),[F,O]=(0,r.useState)(""),[$,G]=(0,r.useState)(""),[W,V]=(0,r.useState)(""),[J,R]=(0,r.useState)(!1),[q,Q]=(0,r.useState)(!0),[U,H]=(0,r.useState)(""),[K,X]=(0,r.useState)(null),Y=(0,r.useRef)(null),[Z,ee]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if("ALL ITEMS"===f)j(l);else{let e=o.find(e=>e.id===f);e?j(l.filter(t=>t.dish_category_id===e.id)):j(l)}},[f,l,o]),(0,r.useEffect)(()=>{N(l.reduce((e,t)=>(e[t.id]=t.is_available,e),{}))},[l]);let et=async e=>{try{let t=l.find(t=>t.id===e);if(!t)return;let s=localStorage.getItem("access_token"),a=i.$.getInstance(s);N(t=>({...t,[e]:!t[e]})),await a.updateDish(e,{...t,is_available:!v[e]}),p&&await p()}catch(t){N(t=>({...t,[e]:!t[e]})),z("Failed to update availability",{type:"error"})}},es=e=>{A(e),E(e),k(!0)},ea=()=>{k(!1),A(null)},er=()=>{S(!1),O(""),H(""),X(null),Q(!0),ee(!1)},el=e=>{let{name:t,value:s}=e.target;E(e=>({...e,[t]:"price"===t?Number(s)||0:s}))},en=async(e,t)=>{t.stopPropagation(),B("Are you sure you want to delete this dish?",async()=>{try{L(e);let t=localStorage.getItem("access_token"),s=i.$.getInstance(t||"");await s.deleteDish(e),b&&b(e),p&&await p(),z("Dish deleted successfully",{type:"success"})}catch(e){console.error("Error deleting dish:",e),z("Failed to delete the dish. Please try again.",{type:"error"})}finally{L(null)}},{title:"Delete Dish",confirmText:"Delete",cancelText:"Cancel"})},ei=async()=>{let e=i.$.getInstance();if(K)try{let t=await e.uploadFile(K),s={id:Date.now().toString(),name:F,price:Number(U)||0,picture:t.url,is_available:q,dish_category_id:$,is_non_veg:J,meta_data:{},created_at:new Date,updated_at:new Date},a=await e.createDish(s);d(a),p&&await p(),er()}catch(e){console.error("Error adding new product:",e)}},ec=async(e,t)=>{try{let s=localStorage.getItem("access_token");if(!s)return void z("Authentication required",{type:"error"});let a=i.$.getInstance(s);await a.updateDish(e,{name:t.name,price:t.price,picture:t.picture,dish_category_id:t.dish_category_id,is_available:t.is_available,is_non_veg:t.is_non_veg,meta_data:t.meta_data||{}}),z("Dish updated successfully",{type:"success"}),p&&await p()}catch(e){z(e instanceof Error?e.message:"Failed to update dish",{type:"error"})}},ed=async e=>{if(e.target.files&&e.target.files[0]){M(e.target.files[0]);try{let t=i.$.getInstance(),s=await t.uploadFile(e.target.files[0]);E(e=>({...e,picture:s.url}))}catch(e){console.error("Error uploading image:",e),z("Failed to upload image",{type:"error"})}}};return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[y.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden shadow hover:shadow-md transition-shadow cursor-pointer relative group",onClick:()=>{es(e)},children:[(0,a.jsxs)("div",{className:"h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:e.picture,alt:e.name,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:t=>en(e.id,t),disabled:D===e.id,className:"absolute top-3 right-3 p-1.5 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700 z-10",title:"Delete dish",children:D===e.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(n.A,{size:16})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg",children:e.name}),(0,a.jsxs)("p",{className:"text-black",children:["â‚¹ ",e.price]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("button",{className:"text-orange-500 text-sm flex items-center hover:underline",children:["Advanced settings ",(0,a.jsx)(u.A,{size:16})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsx)("span",{className:"text-sm text-black",children:v[e.id]?"Available":"Unavailable"}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:v[e.id],onChange:()=>et(e.id)}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})]})]},e.id)),(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden border-dashed flex items-center justify-center h-full min-h-[300px]",children:(0,a.jsxs)("button",{onClick:()=>S(!0),className:"flex flex-col items-center text-black hover:text-orange-500 transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-current flex items-center justify-center mb-2",children:(0,a.jsx)(m.A,{size:24})}),(0,a.jsx)("span",{className:"text-sm",children:"Add new product"})]})})]}),w&&_&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 text-gray-800 bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:ea,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:I.picture,alt:I.name,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{className:"absolute top-4 right-4 bg-white rounded-full p-2 shadow-md hover:bg-gray-100",onClick:ea,children:(0,a.jsx)(x.A,{size:20,className:"text-gray-800"})}),(0,a.jsx)("button",{onClick:()=>{var e;null==(e=P.current)||e.click()},className:"absolute top-4 left-4 bg-white rounded-lg px-4 py-2 shadow-md hover:bg-gray-100 cursor-pointer",children:(0,a.jsx)("span",{children:"Update Image"})}),(0,a.jsx)("input",{ref:P,type:"file",onChange:ed,className:"hidden",accept:"image/*"})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_&&ea()},className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Name"}),(0,a.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(h.A,{size:16})})]}),(0,a.jsx)("input",{type:"text",name:"name",value:I.name,onChange:el,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Category"})}),(0,a.jsx)("input",{type:"text",disabled:!0,name:"category",value:(null==(t=o.find(e=>e.id===I.dish_category_id))?void 0:t.name)||"",onChange:el,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Price"}),(0,a.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(h.A,{size:16})})]}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:"â‚¹"}),(0,a.jsx)("input",{type:"number",name:"price",value:I.price,onChange:el,className:"pl-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),_&&en(_.id,e)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-500 hover:bg-red-600 flex items-center",disabled:D===_.id,children:[D===_.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,a.jsx)(n.A,{size:16,className:"mr-2"}),"Delete Dish"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{type:"button",onClick:ea,className:"mr-3 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-500 hover:bg-orange-600",onClick:()=>ec(I.id,I),children:"Save Changes"})]})]})]})]})}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:er,children:(0,a.jsx)("div",{className:"max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-800 text-lg mb-4",children:"Product Details"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Product Name"}),(0,a.jsx)("input",{type:"text",value:F,onChange:e=>O(e.target.value),className:"w-full p-2 border text-gray-600 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Name"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>ee(!Z),className:"w-full p-2 border border-gray-300 rounded pr-8 text-gray-500 text-left flex justify-between items-center",children:[(0,a.jsx)("span",{children:W}),(0,a.jsx)("div",{className:"text-gray-400",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6"})})})]}),Z&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border text-gray-500 border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:o.map(e=>(0,a.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{G(e.id),V(e.name),ee(!1)},children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm px-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Make it visible for the user"}),(0,a.jsx)("button",{type:"button",onClick:()=>Q(!q),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ".concat(q?"bg-orange-500":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(q?"translate-x-6":"translate-x-1")})})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Product Image"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mb-2",children:"This will be the cover image for the users and admins"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300  rounded-md p-6 flex flex-col items-center justify-center",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]&&X(e.dataTransfer.files[0])},children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(g,{className:"text-gray-400",size:20})}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["Drag and Drop the Images here or"," ",(0,a.jsx)("button",{className:"text-blue-500",onClick:()=>{var e;null==(e=Y.current)||e.click()},children:"Select file"})]}),(0,a.jsx)("input",{ref:Y,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&X(e.target.files[0])},className:"hidden",accept:"image/*"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:"All formats Supported (PNG, JPG, JPEG, MP4 and MOV)"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Product Price(â‚¹)"}),(0,a.jsx)("input",{type:"text",value:U,onChange:e=>H(e.target.value),className:"w-full p-2 border border-gray-300 text-gray-500 rounded"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Is Non Veg?"}),(0,a.jsx)("input",{type:"checkbox",checked:J,onChange:e=>R(e.target.checked),className:"w-full p-2 border border-gray-300 text-gray-500 rounded"})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{onClick:er,className:"flex-1 py-3 bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:ei,className:"flex-1 bg-orange-500 text-white py-3 font-medium hover:bg-orange-600 transition-colors",children:"Add Item"})]})]})})})]})}var p=s(49103);function b(e){let{closeAction:t,categories:s,setCategories:l,onCategoryAdded:n}=e,[c,d]=(0,r.useState)(""),[o,u]=(0,r.useState)(null),m=(0,r.useRef)(null),h=async()=>{let e=i.$.getInstance();if(!o)return;let a=await e.uploadFile(o);l([...s,await e.createDishCategory(c,a.url)]),n&&await n(),t()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-md",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Category Details"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(x.A,{size:24})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Name"}),(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full p-2 border text-gray-400 border-gray-300 rounded",placeholder:"Enter category name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Image"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mb-2",children:"This will be the cover image for the users and admins"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded p-6 flex flex-col items-center justify-center",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]&&u(e.dataTransfer.files[0])},children:[o?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selected file:"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:o.name})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(g,{className:"text-gray-400",size:20})}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["Drag and Drop the images here or"," ",(0,a.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-600",onClick:()=>{var e;null==(e=m.current)||e.click()},children:"Select file"})]})]}),(0,a.jsx)("input",{ref:m,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&u(e.target.files[0])},className:"hidden",accept:"image/*"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:"All formats Supported (PNG, JPG, JPEG, MP4 and MOV)"})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,a.jsx)("button",{onClick:t,className:"flex-1 py-2 border border-gray-300 rounded text-gray-800 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:h,className:"flex-1 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Add Category"})]})]})})})}function y(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[d,o]=(0,r.useState)(null),{showPopup:u}=(0,c.O)();(0,r.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=i.$.getInstance(),s=(await e.getBanners()).map(e=>({...e,image_url:e.image}));t(s)}catch(e){console.error("Error fetching banners:",e),u("Failed to fetch banners",{type:"error"})}},h=async()=>{if(!d)return void u("Please provide an image",{type:"warning"});try{let e=i.$.getInstance(),t=new FormData;t.append("file",d),await e.createBanner(t),l(!1),o(null),m(),u("Banner added successfully",{type:"success"})}catch(e){console.error("Error adding banner:",e),u("Failed to add banner",{type:"error"})}},g=async e=>{try{let t=i.$.getInstance();await t.deleteBanner(e),m(),u("Banner deleted successfully",{type:"success"})}catch(e){console.error("Error deleting banner:",e),u("Failed to delete banner",{type:"error"})}};return(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-xl text-black mb-4",children:"Banner Management"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("img",{src:e.image_url,alt:"Banner",className:"w-full h-40 object-cover rounded-lg mb-2"}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{onClick:()=>g(e.id),className:"text-red-500",children:(0,a.jsx)(n.A,{size:18})})})]},e.id)),(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex items-center justify-center cursor-pointer",onClick:()=>l(!0),children:[(0,a.jsx)(p.A,{size:24,className:"text-gray-400"}),(0,a.jsx)("span",{className:"ml-2 text-gray-400",children:"Add New Banner"})]})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0  backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg text-black ",children:"Add New Banner"}),(0,a.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(x.A,{size:24})})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return o((null==(t=e.target.files)?void 0:t[0])||null)},className:"w-full p-2 border rounded mb-4"}),(0,a.jsx)("button",{onClick:h,className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",children:"Add Banner"})]})})]})}function j(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[h,g]=(0,r.useState)("ALL ITEMS"),[j,v]=(0,r.useState)(!0),N=async e=>{try{let t=i.$.getInstance(e),s=await t.getDishCategories(),a=await t.getDishes(),r=s.map(e=>({id:e.id,name:e.name,count:a.filter(t=>t.dish_category_id===e.id).length,image:e.picture||"/placeholder-image.png"})),l={id:"all-items",name:"ALL ITEMS",count:a.length,image:"/menu-card.png"};u(s),n(a),x([l,...r]),"ALL ITEMS"===h||s.some(e=>e.id===h)||g("ALL ITEMS")}catch(e){console.error("Error fetching data:",e)}},w=async()=>{let e=localStorage.getItem("access_token");e&&(await N(e),v(!1))},k=async()=>{await w(),g("ALL ITEMS")},C=e=>{x(t=>t.map(t=>"ALL ITEMS"===t.name||t.id===e.dish_category_id?{...t,count:t.count+1}:t))};return(0,r.useEffect)(()=>{let e=localStorage.getItem("access_token");e?N(e).then(()=>v(!1)).catch(()=>v(!1)):v(!1)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Q,{items:["Cafe","Operations"]}),(0,a.jsxs)("main",{className:"flex-1 p-6 ",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"h-5 w-5 text-black mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),(0,a.jsx)("h2",{className:"text-gray-700 text-lg font-medium",children:"Menu"})]}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"flex items-center px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-700 font-medium hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"New Category"]})]}),(0,a.jsx)(d,{tabs:m,onCategoryDeleted:k}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg text-gray-700 font-medium mb-4",children:"Items"}),(0,a.jsx)(o,{activeTab:h,setActiveTab:g,tabs:m}),(0,a.jsx)(f,{isLoading:j,dishes:(()=>{if("ALL ITEMS"===h)return s;{let e=c.find(e=>e.id===h);return e?s.filter(t=>t.dish_category_id===e.id):s}})(),setDishes:e=>{n(t=>[...t,e]),C(e)},categories:c,activeTab:h,refreshData:w,onDishDeleted:e=>{let t=s.find(t=>t.id===e);n(t=>t.filter(t=>t.id!==e)),t&&x(e=>e.map(e=>"ALL ITEMS"===e.name||e.id===t.dish_category_id?{...e,count:e.count-1}:e))}})]}),(0,a.jsx)(y,{}),e&&(0,a.jsx)(b,{closeAction:()=>t(!1),categories:c,setCategories:u,onCategoryAdded:w})]})]})}},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84616:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},89917:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},94425:(e,t,s)=>{"use strict";s.d(t,{PopupProvider:()=>d,O:()=>o});var a=s(95155),r=s(12115),l=s(54416);function n(e){let{title:t,message:s,isOpen:n,onClose:i,type:c="info",autoClose:d=!0,autoCloseTime:o=3e3}=e,[u,m]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(n&&(m(!0),d)){let e=setTimeout(()=>{m(!1),setTimeout(i,300)},o);return()=>clearTimeout(e)}},[n,d,o,i]),n||u)?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4 pointer-events-none",children:(0,a.jsx)("div",{className:"\n          ".concat((()=>{switch(c){case"success":return"bg-green-50 border-green-500 text-green-700";case"error":return"bg-red-50 border-red-500 text-red-700";case"warning":return"bg-yellow-50 border-yellow-500 text-yellow-700";default:return"bg-blue-50 border-blue-500 text-blue-700"}})()," \n          border rounded-lg shadow-lg max-w-md w-full pointer-events-auto\n          transition-opacity duration-300 ").concat(u?"opacity-100":"opacity-0","\n        "),children:(0,a.jsxs)("div",{className:"p-4 flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(c){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";default:return"text-blue-500"}})()),children:(()=>{switch(c){case"success":return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});case"error":return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});default:return(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,a.jsxs)("div",{className:"ml-3 flex-grow",children:[t&&(0,a.jsx)("h3",{className:"text-sm font-medium",children:t}),(0,a.jsx)("div",{className:"text-sm mt-1",children:s})]}),(0,a.jsx)("button",{onClick:()=>{m(!1),setTimeout(i,300)},className:"flex-shrink-0 ml-1 text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,a.jsx)(l.A,{size:18})})]})})}):null}function i(e){let{title:t="Confirm Action",message:s,isOpen:n,onConfirm:i,onCancel:c,confirmText:d="Confirm",cancelText:o="Cancel"}=e,[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&m(!0)},[n]);let x=()=>{m(!1),setTimeout(()=>{c()},300)};return n||u?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",children:(0,a.jsx)("div",{className:"\n          bg-white border rounded-lg shadow-lg max-w-md w-full\n          transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0","\n          transition-transform duration-300 ").concat(u?"scale-100":"scale-95","\n        "),children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,a.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,a.jsx)(l.A,{size:20})})]}),(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)("p",{className:"text-gray-600",children:s})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:o}),(0,a.jsx)("button",{onClick:()=>{m(!1),setTimeout(()=>{i()},300)},className:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-white hover:bg-red-700 focus:outline-none",children:d})]})]})})}):null}let c=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[s,l]=(0,r.useState)([]),[d,o]=(0,r.useState)(null),u=e=>{l(t=>t.filter(t=>t.id!==e))},m=()=>{o(null)};return(0,a.jsxs)(c.Provider,{value:{showPopup:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Date.now().toString(),{title:a,type:r="info",autoClose:n=!0,autoCloseTime:i=3e3}=t;l(t=>[...t,{id:s,message:e,title:a,type:r,autoClose:n,autoCloseTime:i}])},showConfirm:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Date.now().toString(),{title:r,confirmText:l,cancelText:n}=s;o({id:a,message:e,title:r,confirmText:l,cancelText:n,onConfirm:t})}},children:[t,s.map(e=>(0,a.jsx)(n,{isOpen:!0,message:e.message,title:e.title,type:e.type,autoClose:e.autoClose,autoCloseTime:e.autoCloseTime,onClose:()=>u(e.id)},e.id)),d&&(0,a.jsx)(i,{isOpen:!0,message:d.message,title:d.title,confirmText:d.confirmText,cancelText:d.cancelText,onConfirm:()=>{d.onConfirm(),m()},onCancel:m})]})}function o(){let e=(0,r.useContext)(c);if(void 0===e)throw Error("usePopup must be used within a PopupProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[997,95,355,441,684,358],()=>t(24547)),_N_E=e.O()}]);