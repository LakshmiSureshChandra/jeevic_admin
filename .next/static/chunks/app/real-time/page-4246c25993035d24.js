(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{6911:(e,t,s)=>{Promise.resolve().then(s.bind(s,82660))},13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},41004:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var r=s(95155),a=s(6874),n=s.n(a),l=s(13052);function i(e){let{items:t}=e;return(0,r.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center",children:[s>0&&(0,r.jsx)(l.A,{size:16,className:"mx-2 text-black"}),(0,r.jsx)(n(),{href:"#",className:"".concat(s===t.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"),children:e})]},s))})}},44020:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},82660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(95155),a=s(41004),n=s(12115),l=s(44020),i=s(34355),o=s(94425);function c(e){var t,s;let{bill:a,onUpdateCapacityAction:c,table:d}=e,[u,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),p=(0,n.useRef)(null),f=(0,n.useRef)(null),j=(0,n.useRef)(null),{showPopup:v}=(0,o.O)(),[y,N]=(0,n.useState)(!1);console.log("billname",a,d),(0,n.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&m(!1),j.current&&!j.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let w=async(e,t)=>{b(!0);let s=localStorage.getItem("access_token");if(!s)return void b(!1);try{let r=i.$.getInstance(s);await r.updateCheckout(e,{is_checked_out:!0,payment_status:"Completed",payment_date:new Date}),await r.markBookingAsCompleted(t),v("Payment completed successfully",{type:"success"})}catch(e){console.error("Failed to complete payment:",e),v("Failed to complete payment",{type:"error"})}finally{b(!1)}},k=async()=>{if(!(null==a?void 0:a.booking_id))return void console.error("No booking ID found");N(!0);try{let e=localStorage.getItem("access_token");if(!e)throw Error("No access token found");let t=i.$.getInstance(e);await t.createUserEndCheckout(a.booking_id),v("Forced checkout completed successfully",{type:"success"})}catch(e){console.error("Failed to force checkout:",e),v("Failed to complete forced checkout",{type:"error"})}finally{N(!1)}},_=()=>{m(!u)},C=async()=>{if(!(null==a?void 0:a.booking_id))return void v("No booking found to delete",{type:"error"});if(window.confirm("Are you sure you want to delete this booking? This action cannot be undone."))try{let e=localStorage.getItem("access_token");if(!e)throw Error("No access token found");let t=i.$.getInstance(e);await t.deleteBooking(a.booking_id),v("Booking deleted successfully",{type:"success"}),m(!1)}catch(e){console.error("Failed to delete booking:",e),v("Failed to delete booking",{type:"error"})}},S=()=>{m(!1),h(!0)},T=async e=>{let t=localStorage.getItem("access_token");if(!t)return;let s=i.$.getInstance(t);try{await s.markTableAsCleaned(e),v("Table marked as cleaned",{type:"success"})}catch(e){console.error("Error marking table as cleaned:",e),v("Failed to mark table as cleaned",{type:"error"})}},L=async()=>{if(!(null==d?void 0:d.id))return void v("Table ID not found",{type:"error"});try{let e=localStorage.getItem("access_token");if(!e)return void v("Authentication required",{type:"error"});let t=i.$.getInstance(e);await t.deleteTable(d.id),m(!1),v("Table deleted successfully",{type:"success"})}catch(e){v(e instanceof Error?e.message:"Failed to delete table",{type:"error"})}},M=e=>{c(e),h(!1),v("Table capacity updated to ".concat(e," seats"),{type:"success"})};if(!d)return(0,r.jsx)("div",{className:"bg-gray-100 border rounded-lg overflow-hidden relative",children:(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("p",{className:"text-gray-500 text-center",children:"No table selected"})})});let A=null!=(s=null!=(t=null==a?void 0:a.tableId)?t:d.table_number)?s:"N/A";return a?(0,r.jsxs)("div",{className:"bg-gray-100 border rounded-lg overflow-hidden relative",children:[(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4 justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-800",children:["Table - ",a.tableId]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[a.items.length," items @ Rs ",a.subtotal]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:f,onClick:_,className:"p-2 rounded-xl cursor-pointer bg-gray-200 hover:bg-gray-300",children:(0,r.jsx)(l.A,{size:20,className:"text-black "})}),u&&(0,r.jsx)("div",{ref:p,className:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-10",children:(0,r.jsxs)("div",{className:"py-1 border rounded-md",children:[(0,r.jsxs)("button",{onClick:S,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),"Table Details"]}),(0,r.jsxs)("button",{onClick:C,className:"flex items-center w-full px-4 py-2 text-sm text-orange-600 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Delete Booking"]}),(0,r.jsxs)("button",{onClick:L,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Table"]})]})})]})]}),(0,r.jsx)("div",{className:"space-y-3 mb-4 bg-white/60 rounded-xl p-4",children:a.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between ",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-gray-500",children:e.name}),(0,r.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["\xd7",e.quantity]})]}),(0,r.jsxs)("span",{className:"text-gray-700",children:["₹ ",e.price]})]},t))}),(0,r.jsxs)("div",{className:"border-t pt-3 space-y-2 p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Total"}),(0,r.jsx)("span",{className:"font-medium text-gray-700",children:a.subtotal})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-500",children:["Discount ",(0,r.jsxs)("span",{className:"text-sm",children:[a.discount.percentage,"%"]})]}),(0,r.jsxs)("span",{className:"text-gray-700",children:["₹ ",a.discount.amount]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["GST ",(0,r.jsxs)("span",{className:"text-sm",children:[a.gst.percentage,"%"]})]}),(0,r.jsxs)("span",{className:"text-gray-700",children:["₹ ",a.gst.amount]})]})]}),(0,r.jsxs)("div",{className:"mt-4 bg-orange-500 text-white p-3 cursor-pointer rounded-md flex justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:"Grand Total"}),(0,r.jsxs)("span",{className:"font-medium",children:["₹ ",a.grandTotal]})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,r.jsx)("button",{onClick:k,disabled:y||!(null==a?void 0:a.booking_id),className:"py-3 w-full flex items-center justify-center rounded-md transition-colors duration-200 ".concat(!y&&(null==a?void 0:a.booking_id)?"bg-red-500 hover:bg-red-600 text-white cursor-pointer":"bg-gray-400 cursor-not-allowed text-white"),children:y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Checkout..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Force Checkout"]})}),(0,r.jsx)("button",{onClick:async()=>{await w(a.checkout_id,a.booking_id)},disabled:g,className:"py-3 w-full bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center justify-center transition-colors duration-200 ".concat(g?"cursor-not-allowed opacity-70 bg-green-400":"cursor-pointer"),children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Mark as completed"]})}),(0,r.jsxs)("button",{onClick:async()=>{await T(d.id)},className:"py-3 w-full bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center justify-center transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Mark as Cleaned"]})]})]}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{ref:j,className:"bg-white rounded-lg w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg text-black font-medium",children:"Table Details"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"text-gray-500 cursor-pointer",children:(0,r.jsx)("svg",{className:"w-5 h-5 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Table Name"}),(0,r.jsx)("div",{className:"mt-1 text-gray-400 flex items-center justify-between",children:(0,r.jsx)("span",{children:a.tableId})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Table Capacity"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("select",{value:d.capacity,onChange:e=>M(Number(e.target.value)),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:1,children:"1 Seat"}),(0,r.jsx)("option",{value:2,children:"2 Seats"}),(0,r.jsx)("option",{value:3,children:"3 Seats"}),(0,r.jsx)("option",{value:4,children:"4 Seats"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table QR"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"QR where users can order items from their table"}),(0,r.jsx)("div",{className:"flex justify-center mb-2",children:(0,r.jsx)("img",{src:d.meta_data.qr_code,alt:"QR Code",className:"border"})}),(0,r.jsxs)("button",{className:"w-full flex items-center justify-center py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,r.jsx)("p",{className:"cursor-pointer",children:"Download QR"})]})]})]})]})})})]}):(0,r.jsxs)("div",{className:"bg-gray-100 border rounded-lg overflow-hidden relative",children:[(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4 justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-800",children:["Table - ",A]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No active bill"})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{ref:f,onClick:_,className:"p-2 rounded-xl cursor-pointer bg-gray-200 hover:bg-gray-300",children:(0,r.jsx)(l.A,{size:20,className:"text-black "})}),u&&(0,r.jsx)("div",{ref:p,className:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg z-10",children:(0,r.jsxs)("div",{className:"py-1 border rounded-md",children:[(0,r.jsxs)("button",{onClick:S,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"})}),"Table Details"]}),a&&(0,r.jsxs)("button",{onClick:C,className:"flex items-center w-full px-4 py-2 text-sm text-orange-600 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Delete Booking"]}),(0,r.jsxs)("button",{onClick:L,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Table"]})]})})]})]}),(0,r.jsx)("div",{className:"flex justify-center items-center h-48 bg-white/60 rounded-xl",children:(0,r.jsx)("p",{className:"text-gray-500 text-center",children:"No bill selected"})})]}),x&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{ref:j,className:"bg-white rounded-lg w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg text-black font-medium",children:"Table Details"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"text-gray-500 cursor-pointer",children:(0,r.jsx)("svg",{className:"w-5 h-5 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Table Name"}),(0,r.jsx)("div",{className:"mt-1 text-gray-400 flex items-center justify-between",children:(0,r.jsx)("span",{children:A})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Table Capacity"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("select",{value:d.capacity,onChange:e=>M(Number(e.target.value)),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:1,children:"1 Seat"}),(0,r.jsx)("option",{value:2,children:"2 Seats"}),(0,r.jsx)("option",{value:3,children:"3 Seats"}),(0,r.jsx)("option",{value:4,children:"4 Seats"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table QR"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"QR where users can order items from their table"}),(0,r.jsx)("div",{className:"flex justify-center mb-2",children:(0,r.jsx)("img",{src:d.meta_data.qr_code,alt:"QR Code",className:"border"})}),(0,r.jsxs)("button",{className:"w-full flex items-center justify-center py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,r.jsx)("p",{className:"cursor-pointer",children:"Download QR"})]})]})]})]})})})]})}function d(e){let{statuses:t}=e;return(0,r.jsx)("div",{className:"flex flex-wrap gap-4 justify-center",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center px-2 border-2 py-1 rounded-md",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 rounded-full ".concat(e.color," mr-2")}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:e.name})]},e.name))})}var u=s(84616),m=s(54416);function x(e){let{isOpen:t,onCloseAction:s,onAddTableAction:a}=e,[l,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(4),d=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&s()};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t,s]);let u=async e=>{e.preventDefault(),await a({name:l,capacity:o}),s(),i(""),c(4)};return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{ref:d,className:"bg-white rounded-lg w-full max-w-md mx-4",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg text-black font-medium",children:"Add New Table"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:(0,r.jsx)(m.A,{size:20})})]}),(0,r.jsx)("form",{onSubmit:u,children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Table ID"}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"e.g. EX09",className:"w-full px-3 py-2 border rounded-md placeholder:text-gray-400 text-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seating Capacity"}),(0,r.jsxs)("select",{value:o,onChange:e=>c(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-md focus:outline-none text-gray-600 focus:ring-2 focus:ring-orange-500",children:[(0,r.jsx)("option",{value:1,children:"1 Seat"}),(0,r.jsx)("option",{value:2,children:"2 Seats"}),(0,r.jsx)("option",{value:3,children:"3 Seats"}),(0,r.jsx)("option",{value:4,children:"4 Seats"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border rounded-md cursor-pointer text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 cursor-pointer text-white rounded-md hover:bg-orange-600",children:"Add Table"})]})]})})]})})}):null}function h(e){let{tables:t,setTables:s,tableStates:a}=e,l=[{name:"Active",color:"bg-green-400"},{name:"Ready to Bill",color:"bg-orange-400"},{name:"To be Cleaned",color:"bg-red-400"},{name:"Untouched",color:"bg-gray-300"}],[o,m]=(0,n.useState)(""),[h,b]=(0,n.useState)(!1),[p,f]=(0,n.useState)({}),[j,v]=(0,n.useState)({});(0,n.useEffect)(()=>{let e={};a.forEach(t=>{var s,r;v(e=>({...e,[t.table_number]:t.status})),e[t.table_number]={tableId:t.table_number,items:t.items.map(e=>({name:e.name,quantity:e.quantity,price:e.price})),subtotal:t.total_amount,discount:{percentage:0,amount:0},gst:{percentage:0,amount:0},grandTotal:t.total_amount,checkout_id:null!=(s=t.checkout_id)?s:null,booking_id:null!=(r=t.booking_id)?r:null}}),f(e)},[a]),console.log("table status",a);let y=(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,capacity:t}:s))},N=async e=>{try{let r=i.$.getInstance(),a=await r.createTable({table_number:e.name,capacity:e.capacity,meta_data:{status:"Untouched",qr_code:"https://api.qrserver.com/v1/create-qr-code/?size=240x240&data=https://dine.jeevic.com/book-table/".concat(e.name)}});s([...t,a.data])}catch(e){console.error("Error adding table:",e)}};return(0,r.jsxs)("div",{className:"p-4 max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Floor Layout"}),(0,r.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center px-3 py-2 cursor-pointer bg-gray-200 text-gray-700 rounded-md hover:bg-orange-400",children:[(0,r.jsx)(u.A,{size:18,className:"mr-1"}),"Add Table"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-[2fr,1fr] gap-4",children:[(0,r.jsx)(g,{tables:t,selectedTable:o,setSelectedTable:m,statuses:l,tableStatus:j}),(0,r.jsx)(d,{statuses:l}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("div",{className:"my-3 border-t pt-3 flex items-center text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"mr-2",children:"Table Management"}),(0,r.jsx)("span",{className:"mx-2",children:"•"}),(0,r.jsx)("span",{className:"font-medium mr-2",children:o})]}),(0,r.jsx)(c,{bill:p[o],onUpdateCapacityAction:e=>y(o,e),table:t.find(e=>e.table_number===o)})]})]}),(0,r.jsx)(x,{isOpen:h,onCloseAction:()=>b(!1),onAddTableAction:N})]})}function g(e){let{tables:t,selectedTable:s,setSelectedTable:a,tableStatus:n}=e,l=e=>{switch(e){case"Active":return"bg-green-400";case"Ready to Bill":return"bg-orange-400";case"To be Cleaned":return"bg-red-400";default:return"bg-gray-300"}},i=e=>{let t=[];return e.capacity>=1&&t.push((0,r.jsx)("div",{className:"absolute top-1/2 -left-2 transform -translate-y-1/2 w-2.5 h-14 bg-gray-100 rounded-full"},"left")),e.capacity>=2&&t.push((0,r.jsx)("div",{className:"absolute top-1/2 -right-2 transform -translate-y-1/2 w-2.5 h-14 bg-gray-100 rounded-full"},"right")),e.capacity>=3&&t.push((0,r.jsx)("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 w-14 h-2.5 bg-gray-100 rounded-full"},"top")),e.capacity>=4&&t.push((0,r.jsx)("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-14 h-2.5 bg-gray-100 rounded-full"},"bottom")),t};return(0,r.jsx)("div",{className:"grid grid-cols-3 gap-12",children:t.map(e=>{let t=s===e.table_number;return(0,r.jsx)("div",{className:"flex items-center  justify-center relative",children:(0,r.jsxs)("div",{className:"relative w-20 h-20 ".concat(t?"scale-110":""," transition-all m-2  duration-200"),onClick:()=>a(e.table_number),children:[i(e),(0,r.jsx)("div",{className:"\n                  absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 \n                  w-16 h-16 rounded-xl flex items-center justify-center\n                  ".concat(l(n[e.table_number]),"\n                  ").concat(t?"border-2 border-blue-500":"","\n                  cursor-pointer\n                "),children:(0,r.jsx)("span",{className:"font-medium text-white text-base",children:e.table_number})})]})},e.id)})})}function b(e){let{orders:t,dishes:s,tables:a,bookings:l}=e,[o,c]=(0,n.useState)("preparing"),[d,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),[h,g]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("access_token");if(e)try{let t=i.$.getInstance(e),s=await t.getTableStats();g(s.data)}catch(e){console.error("Failed to fetch table stats:",e)}})()},[t]);let b=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)},p=t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>{var t;let r=a.find(t=>t.table_number===e.table_id),n=h.find(t=>t.table_number===e.table_id),l=e.items.map((t,r)=>{var a,l;let i=s.find(e=>e.id===t.dish_id),o="ready"===e.order_status?t.status:(null==n||null==(a=n.items[r])?void 0:a.item_status)||"pending";return{dish_id:t.dish_id,item_index:r,dish_name:null!=(l=null==i?void 0:i.name)?l:"Unknown Dish",quantity:t.quantity,total:((null==i?void 0:i.price)||0)*t.quantity,instructions:t.instructions,item_status:o}}),i=l.reduce((e,t)=>e+t.total,0);return{order_id:e.id,table_id:null!=(t=null==r?void 0:r.table_number)?t:"Unknown",items:l,total:i,status:e.order_status,updated_at:e.updated_at.toString()}}),f={pending:p.filter(e=>"pending"===e.status).length,preparing:p.filter(e=>"preparing"===e.status).length,served:p.filter(e=>"served"===e.status).length,ready:p.filter(e=>"ready"===e.status).length},j=[{id:"pending",label:"New Orders",count:f.pending},{id:"preparing",label:"Preparing",count:f.preparing},{id:"served",label:"Served",count:f.served},{id:"ready",label:"Ready",count:f.ready}],v=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"";(0,n.useEffect)(()=>{u(p.filter(e=>e.status===o))},[o,t,l,s,a]);let y=async e=>{x(e.order_id);let s=localStorage.getItem("access_token");if(!s){console.error("No access token found in localStorage"),x(null);return}try{let r,a=i.$.getInstance(s);switch(e.status){case"pending":r="preparing",await a.markOrderAsPreparing(e.order_id);break;case"preparing":r="served",await a.markOrderAsServed(e.order_id);break;case"served":r="ready",await a.markOrderAsReady(e.order_id);break;default:r="ready"}u(t=>t.map(t=>t.order_id===e.order_id?{...t,status:r}:t)),await new Promise(s=>{let a=setInterval(()=>{let n=t.find(t=>t.id===e.order_id);n&&n.order_status===r&&(clearInterval(a),s(!0))},500);setTimeout(()=>{clearInterval(a),s(!1)},1e4)})}catch(e){console.error("Failed to update order status:",e)}finally{x(null)}},N=e=>{switch(e){case"pending":return"Start Preparing";case"preparing":return"Mark as Served";case"served":return"Complete Order";default:return""}},w=async(e,t,s)=>{if(window.confirm("This will remove the item from the current order. Proceed?")){let t=e.items.filter((e,t)=>t!==s).map(e=>({dish_id:e.dish_id,quantity:e.quantity,status:e.item_status,instructions:e.instructions})),r=localStorage.getItem("access_token");if(!r)return void console.error("No access token found in localStorage");let a=i.$.getInstance(r);try{await a.updateOrDeleteOrder(e.order_id,{items:t})}catch(e){console.error("Failed to update order:",e)}}};return(0,r.jsxs)("div",{className:"bg-white border rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"flex border-b",children:j.map(e=>(0,r.jsxs)("button",{className:"flex-1 py-3 cursor-pointer text-center relative ".concat(o===e.id?"text-orange-500 font-medium":"text-gray-600"),onClick:()=>c(e.id),children:[e.label,(0,r.jsx)("span",{className:"ml-1 bg-gray-100 text-gray-700 text-xs px-1.5 py-0.5 rounded-full",children:e.count}),o===e.id&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-orange-500"})]},e.id))}),(0,r.jsx)("div",{className:"p-4 space-y-4",children:0===d.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No ",o," orders at the moment"]}):d.map(e=>(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full mr-3 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-800",children:["Table - ",e.table_id]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("p",{className:"text-sm text-blue-400",children:["Order #",e.order_id.substring(0,8)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Last updated: ",b(e.updated_at)]})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-3",children:[e.items.map((t,s)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:"text-gray-700",children:t.dish_name}),(0,r.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["\xd7",t.quantity]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("pending"===t.item_status?"bg-gray-100 text-gray-600":"preparing"===t.item_status?"bg-orange-100 text-orange-600":"served"===t.item_status?"bg-green-100 text-green-600":"ready"===t.item_status?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:v(t.item_status)}),"pending"===e.status&&"pending"===t.item_status&&(0,r.jsx)("button",{onClick:()=>w(e,t.dish_id,s),className:"text-red-500 mx-1",children:"Remove"})]})]}),t.instructions&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 italic",children:["Note: ",t.instructions]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["₹",t.total]})]},s)),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ₹",e.total]}),"ready"!==e.status&&(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:(0,r.jsx)("button",{onClick:()=>y(e),disabled:m===e.order_id,className:"flex-1 ".concat(m===e.order_id?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"," text-white py-2 px-4 rounded transition duration-200"),children:m===e.order_id?"Processing...":N(e.status)})})]})]})]})},e.order_id))})]})}var p=s(19946);let f=(0,p.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),j=(0,p.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function v(){let[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),c=(0,n.useRef)(null),d=(0,n.useRef)(null);(0,n.useEffect)(()=>{d.current=new Audio("/sound.mp3");let e=async()=>{try{var e,t;await (null==(e=d.current)?void 0:e.play()),null==(t=d.current)||t.pause(),d.current.currentTime=0}catch(e){console.error("Failed to enable audio:",e)}},t=()=>{e(),document.removeEventListener("click",t),document.removeEventListener("touchstart",t)};return document.addEventListener("click",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("click",t),document.removeEventListener("touchstart",t)}},[]),(0,n.useEffect)(()=>{async function e(){try{let t=await i.$.getInstance().getAllAssistance();if(s.length<t.data.length){var e;null==(e=d.current)||e.play()}a(t.data)}catch(e){console.error("Failed to fetch assistance data:",e)}}e();let t=setInterval(e,5e3);return()=>clearInterval(t)},[s.length]);let u=async e=>{try{o(t=>[...t,e]),await i.$.getInstance().deleteAssistance(e),a(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to delete assistance:",e)}finally{o(t=>t.filter(t=>t!==e))}};return(0,r.jsx)("header",{className:"h-16 border-b flex items-center justify-end px-6",children:(0,r.jsx)("div",{className:"flex justify-end items-center",children:(0,r.jsxs)("div",{className:"relative",ref:c,children:[(0,r.jsxs)("button",{className:"p-2 rounded-full hover:bg-indigo-50 relative transition-colors",onClick:()=>t(!e),children:[(0,r.jsx)(f,{size:20,className:"text-indigo-600"}),s.length>0&&(0,r.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full animate-pulse"})]}),e&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-indigo-100 rounded-lg shadow-lg z-50",children:(0,r.jsx)("div",{className:"p-3 space-y-2",children:0===s.length?(0,r.jsx)("div",{className:"text-center text-gray-500 py-4",children:"No assistance requests"}):s.map(e=>(0,r.jsxs)("div",{className:"border border-indigo-100 rounded-lg p-3 bg-white hover:bg-indigo-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"font-medium text-indigo-900",children:["Table No: ",e.table_number]}),(0,r.jsx)("button",{className:"px-4 py-1.5 rounded-md text-sm font-medium transition-colors\n                            ".concat(l.includes(e.id)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-500 hover:bg-red-600 text-white"),onClick:()=>u(e.id),disabled:l.includes(e.id),children:l.includes(e.id)?(0,r.jsx)(j,{size:16,className:"animate-spin"}):"Clear"})]}),(0,r.jsx)("div",{className:"text-indigo-600 text-sm mt-1",children:"Requested Assistance"})]},e.id))})})]})})})}function y(){let[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[m,x]=(0,n.useState)([]),[g,p]=(0,n.useState)(!0),f=async e=>{try{let s=i.$.getInstance(e),[r,a,n,o,d]=await Promise.all([s.getTables(),s.getOrders(),s.getBookings(),s.getDishes(),s.getTableStats()]);t(r.data),l(a.data),c(n.data),u(o);let m=d.data.map(e=>{let t=n.data.find(t=>t.id===e.booking_id);if(t&&t.is_ready_to_bill)return console.log("Changed TableStat:",{...e,status:"Ready to Bill"}),{...e,status:"Ready to Bill"};let s=r.data.find(t=>t.id===e.table_number);return s&&"Untouched"===s.meta_data.status&&!0===s.meta_data.to_be_cleaned?(console.log("Changed TableStat:",{...e,status:"To be Cleaned"}),{...e,status:"To be Cleaned"}):(console.log("Unchanged TableStat:",e),e)});x(m),p(!1)}catch(e){console.error("Error fetching data:",e),p(!1)}};return((0,n.useEffect)(()=>{let e=localStorage.getItem("access_token");e&&f(e)},[]),(0,n.useEffect)(()=>{let e=setInterval(()=>{let e=localStorage.getItem("access_token");e&&f(e)},5e3);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{g||console.log("Updated Table States:",m)},[m,g]),g)?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex justify-between ",children:[(0,r.jsx)(a.Q,{items:["Cafe","Real-Time view"]}),(0,r.jsx)(v,{})]}),(0,r.jsxs)("main",{className:"flex-1 p-6",children:[(0,r.jsx)("h2",{className:"text-lg text-gray-800 font-medium mb-4",children:"Table Management"}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,r.jsx)("div",{className:"lg:w-1/2 xl:w-7/12",children:(0,r.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,r.jsx)(h,{tables:e,setTables:t,tableStates:m})})}),(0,r.jsx)("div",{className:"lg:w-1/2 xl:w-5/12 flex flex-col gap-6",children:(0,r.jsx)(b,{orders:s,tables:e,dishes:d,bookings:o})})]})]})]})}},84616:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},94425:(e,t,s)=>{"use strict";s.d(t,{PopupProvider:()=>c,O:()=>d});var r=s(95155),a=s(12115),n=s(54416);function l(e){let{title:t,message:s,isOpen:l,onClose:i,type:o="info",autoClose:c=!0,autoCloseTime:d=3e3}=e,[u,m]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(l&&(m(!0),c)){let e=setTimeout(()=>{m(!1),setTimeout(i,300)},d);return()=>clearTimeout(e)}},[l,c,d,i]),l||u)?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4 pointer-events-none",children:(0,r.jsx)("div",{className:"\n          ".concat((()=>{switch(o){case"success":return"bg-green-50 border-green-500 text-green-700";case"error":return"bg-red-50 border-red-500 text-red-700";case"warning":return"bg-yellow-50 border-yellow-500 text-yellow-700";default:return"bg-blue-50 border-blue-500 text-blue-700"}})()," \n          border rounded-lg shadow-lg max-w-md w-full pointer-events-auto\n          transition-opacity duration-300 ").concat(u?"opacity-100":"opacity-0","\n        "),children:(0,r.jsxs)("div",{className:"p-4 flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(o){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";default:return"text-blue-500"}})()),children:(()=>{switch(o){case"success":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});case"error":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});default:return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,r.jsxs)("div",{className:"ml-3 flex-grow",children:[t&&(0,r.jsx)("h3",{className:"text-sm font-medium",children:t}),(0,r.jsx)("div",{className:"text-sm mt-1",children:s})]}),(0,r.jsx)("button",{onClick:()=>{m(!1),setTimeout(i,300)},className:"flex-shrink-0 ml-1 text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,r.jsx)(n.A,{size:18})})]})})}):null}function i(e){let{title:t="Confirm Action",message:s,isOpen:l,onConfirm:i,onCancel:o,confirmText:c="Confirm",cancelText:d="Cancel"}=e,[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l&&m(!0)},[l]);let x=()=>{m(!1),setTimeout(()=>{o()},300)};return l||u?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",children:(0,r.jsx)("div",{className:"\n          bg-white border rounded-lg shadow-lg max-w-md w-full\n          transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0","\n          transition-transform duration-300 ").concat(u?"scale-100":"scale-95","\n        "),children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,r.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,r.jsx)(n.A,{size:20})})]}),(0,r.jsx)("div",{className:"mb-5",children:(0,r.jsx)("p",{className:"text-gray-600",children:s})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:d}),(0,r.jsx)("button",{onClick:()=>{m(!1),setTimeout(()=>{i()},300)},className:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-white hover:bg-red-700 focus:outline-none",children:c})]})]})})}):null}let o=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),u=e=>{n(t=>t.filter(t=>t.id!==e))},m=()=>{d(null)};return(0,r.jsxs)(o.Provider,{value:{showPopup:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Date.now().toString(),{title:r,type:a="info",autoClose:l=!0,autoCloseTime:i=3e3}=t;n(t=>[...t,{id:s,message:e,title:r,type:a,autoClose:l,autoCloseTime:i}])},showConfirm:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Date.now().toString(),{title:a,confirmText:n,cancelText:l}=s;d({id:r,message:e,title:a,confirmText:n,cancelText:l,onConfirm:t})}},children:[t,s.map(e=>(0,r.jsx)(l,{isOpen:!0,message:e.message,title:e.title,type:e.type,autoClose:e.autoClose,autoCloseTime:e.autoCloseTime,onClose:()=>u(e.id)},e.id)),c&&(0,r.jsx)(i,{isOpen:!0,message:c.message,title:c.title,confirmText:c.confirmText,cancelText:c.cancelText,onConfirm:()=>{c.onConfirm(),m()},onCancel:m})]})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("usePopup must be used within a PopupProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[997,95,355,441,684,358],()=>t(6911)),_N_E=e.O()}]);