(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[564],{19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),o=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...l,width:a,height:a,stroke:s,strokeWidth:o?24*Number(n)/Number(a):n,className:i("lucide",c),...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{className:l,...d}=s;return(0,r.createElement)(c,{ref:n,iconNode:t,className:i("lucide-".concat(a(o(e))),"lucide-".concat(e),l),...d})});return s.displayName=o(e),s}},47924:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},54416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},60397:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(95155),a=s(12115),n=s(34355),o=s(47924),i=s(94425);function l(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!0),{showPopup:u,showConfirm:m}=(0,i.O)();(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=localStorage.getItem("access_token");if(!e)throw Error("No access token found");let s=n.$.getInstance(e),r=await s.getContactMessages();console.log("Response from API:",r);let a=r.rows.map(e=>({id:e.id,name:e.name||"Anonymous",email:e.email,message:e.message,created_at:new Date(e.created_at).toISOString(),is_read:e.is_read,updated_at:e.updated_at?new Date(e.updated_at).toISOString():void 0}));t(a)}catch(e){console.error("Failed to fetch messages:",e),u("Failed to fetch messages",{type:"error"})}finally{d(!1)}},h=async e=>{try{let t=localStorage.getItem("access_token");if(!t)throw Error("No access token found");let s=n.$.getInstance(t);await s.updateContactMessageStatus(e,!0),u("Message marked as read",{type:"success"}),x()}catch(e){console.error("Failed to mark message as read:",e),u("Failed to mark message as read",{type:"error"})}};return e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.message.toLowerCase().includes(s.toLowerCase())),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Contact Messages"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search messages...",value:s,onChange:e=>l(e.target.value),className:"pl-10 pr-4 py-2 text-black border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,r.jsx)(o.A,{className:"absolute left-3 top-2.5 text-gray-400",size:20})]})]})}),c?(0,r.jsx)("div",{className:"text-center py-8",children:"Loading messages..."}):0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No messages found"}):(0,r.jsx)("div",{className:"space-y-4",children:e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.message.toLowerCase().includes(s.toLowerCase())).map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg border ".concat(e.is_read?"border-gray-200":"border-orange-500"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),!e.is_read&&(0,r.jsx)("button",{onClick:()=>h(e.id),className:"text-sm text-orange-500 hover:text-orange-600",children:"Mark as read"})]})]}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.message})]},e.id))})]})}},94425:(e,t,s)=>{"use strict";s.d(t,{PopupProvider:()=>c,O:()=>d});var r=s(95155),a=s(12115),n=s(54416);function o(e){let{title:t,message:s,isOpen:o,onClose:i,type:l="info",autoClose:c=!0,autoCloseTime:d=3e3}=e,[u,m]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(o&&(m(!0),c)){let e=setTimeout(()=>{m(!1),setTimeout(i,300)},d);return()=>clearTimeout(e)}},[o,c,d,i]),o||u)?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 px-4 pointer-events-none",children:(0,r.jsx)("div",{className:"\n          ".concat((()=>{switch(l){case"success":return"bg-green-50 border-green-500 text-green-700";case"error":return"bg-red-50 border-red-500 text-red-700";case"warning":return"bg-yellow-50 border-yellow-500 text-yellow-700";default:return"bg-blue-50 border-blue-500 text-blue-700"}})()," \n          border rounded-lg shadow-lg max-w-md w-full pointer-events-auto\n          transition-opacity duration-300 ").concat(u?"opacity-100":"opacity-0","\n        "),children:(0,r.jsxs)("div",{className:"p-4 flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0 ".concat((()=>{switch(l){case"success":return"text-green-500";case"error":return"text-red-500";case"warning":return"text-yellow-500";default:return"text-blue-500"}})()),children:(()=>{switch(l){case"success":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})});case"error":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});case"warning":return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});default:return(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}})()}),(0,r.jsxs)("div",{className:"ml-3 flex-grow",children:[t&&(0,r.jsx)("h3",{className:"text-sm font-medium",children:t}),(0,r.jsx)("div",{className:"text-sm mt-1",children:s})]}),(0,r.jsx)("button",{onClick:()=>{m(!1),setTimeout(i,300)},className:"flex-shrink-0 ml-1 text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,r.jsx)(n.A,{size:18})})]})})}):null}function i(e){let{title:t="Confirm Action",message:s,isOpen:o,onConfirm:i,onCancel:l,confirmText:c="Confirm",cancelText:d="Cancel"}=e,[u,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&m(!0)},[o]);let x=()=>{m(!1),setTimeout(()=>{l()},300)};return o||u?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/50",children:(0,r.jsx)("div",{className:"\n          bg-white border rounded-lg shadow-lg max-w-md w-full\n          transition-opacity duration-300 ".concat(u?"opacity-100":"opacity-0","\n          transition-transform duration-300 ").concat(u?"scale-100":"scale-95","\n        "),children:(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,r.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,r.jsx)(n.A,{size:20})})]}),(0,r.jsx)("div",{className:"mb-5",children:(0,r.jsx)("p",{className:"text-gray-600",children:s})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none",children:d}),(0,r.jsx)("button",{onClick:()=>{m(!1),setTimeout(()=>{i()},300)},className:"px-4 py-2 bg-red-600 border border-transparent rounded-md text-white hover:bg-red-700 focus:outline-none",children:c})]})]})})}):null}let l=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,n]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),u=e=>{n(t=>t.filter(t=>t.id!==e))},m=()=>{d(null)};return(0,r.jsxs)(l.Provider,{value:{showPopup:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=Date.now().toString(),{title:r,type:a="info",autoClose:o=!0,autoCloseTime:i=3e3}=t;n(t=>[...t,{id:s,message:e,title:r,type:a,autoClose:o,autoCloseTime:i}])},showConfirm:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Date.now().toString(),{title:a,confirmText:n,cancelText:o}=s;d({id:r,message:e,title:a,confirmText:n,cancelText:o,onConfirm:t})}},children:[t,s.map(e=>(0,r.jsx)(o,{isOpen:!0,message:e.message,title:e.title,type:e.type,autoClose:e.autoClose,autoCloseTime:e.autoCloseTime,onClose:()=>u(e.id)},e.id)),c&&(0,r.jsx)(i,{isOpen:!0,message:c.message,title:c.title,confirmText:c.confirmText,cancelText:c.cancelText,onConfirm:()=>{c.onConfirm(),m()},onCancel:m})]})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("usePopup must be used within a PopupProvider");return e}},97338:(e,t,s)=>{Promise.resolve().then(s.bind(s,60397))}},e=>{var t=t=>e(e.s=t);e.O(0,[997,355,441,684,358],()=>t(97338)),_N_E=e.O()}]);