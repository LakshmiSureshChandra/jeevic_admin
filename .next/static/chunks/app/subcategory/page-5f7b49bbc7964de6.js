(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{19946:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(12115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),c=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:r=2,absoluteStrokeWidth:c,className:n="",children:o,iconNode:u,...x}=e;return(0,s.createElement)("svg",{ref:t,...d,width:l,height:l,stroke:a,strokeWidth:c?24*Number(r)/Number(l):r,className:i("lucide",n),...x},[...u.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),o=(e,t)=>{let a=(0,s.forwardRef)((a,r)=>{let{className:d,...o}=a;return(0,s.createElement)(n,{ref:r,iconNode:t,className:i("lucide-".concat(l(c(e))),"lucide-".concat(e),d),...o})});return a.displayName=c(e),a}},29869:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},31983:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(95155),l=a(12115),r=a(34355),c=a(84616),i=a(47924),d=a(89917),n=a(62525),o=a(84503),u=a(54416),x=a(29869);function g(e){let{onClose:t,reload:a,subCategory:c}=e,[i,d]=(0,l.useState)(c.name),[o,g]=(0,l.useState)(c.category_id),[m,h]=(0,l.useState)([]),[y,b]=(0,l.useState)(""),[p,j]=(0,l.useState)(null),[f,v]=(0,l.useState)(!1),[N,w]=(0,l.useState)(c.image_url);(0,l.useEffect)(()=>{(async()=>{try{let e=r.$.getInstance(),t=await e.getAllCategories();h(t)}catch(e){console.error("Failed to fetch categories:",e)}})()},[]);let C=async()=>{if(!i||!o)return void alert("Please provide a subcategory name and select a category.");v(!0);try{let e=r.$.getInstance(),s=[...N];if(p){let t=await e.uploadFile(p);s.push(t.url)}await e.updateSubCategory(c.id,i,o,s),a(),alert("Subcategory updated successfully!"),t()}catch(e){console.error("Failed to update subcategory:",e),alert("Failed to update subcategory.")}finally{v(!1)}},k=e=>{w(N.filter((t,a)=>a!==e))};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Sub Category"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(u.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:o,onChange:e=>g(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),m.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sub Category Name"}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"Enter subcategory name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Existing Images"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mb-4",children:N.map((e,t)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:e,alt:"SubCategory ".concat(t+1),className:"h-24 w-24 object-cover rounded-md"}),(0,s.jsx)("button",{onClick:()=>k(t),className:"absolute -top-2 -right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600",children:(0,s.jsx)(n.A,{size:16})})]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Add New Image"}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{var t;let a=(null==(t=e.target.files)?void 0:t[0])||null;j(a),a&&b(URL.createObjectURL(a))},className:"hidden",id:"subCategoryImageInput"}),(0,s.jsx)("label",{htmlFor:"subCategoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[y?(0,s.jsx)("img",{src:y,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(x.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:t,disabled:f,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:C,disabled:f,children:f?"Updating...":"Update Sub Category"})]})]})]})})})}function m(){let[e,t]=(0,l.useState)([]),[a,u]=(0,l.useState)([]),[x,m]=(0,l.useState)("all"),[h,y]=(0,l.useState)(""),[b,p]=(0,l.useState)(!1),[j,f]=(0,l.useState)(!1),[v,N]=(0,l.useState)(null),[w,C]=(0,l.useState)(!0),k=async()=>{try{C(!0);let e=r.$.getInstance(),[a,s]=await Promise.all([e.getAllCategories(),e.getAllSubCategories()]),l=s.map(e=>{var t;return{...e,image_url:e.image_url||[],category_name:(null==(t=a.find(t=>t.id===e.category_id))?void 0:t.name)||""}}),c=a.map(e=>({...e,count:s.filter(t=>t.category_id===e.id).length}));t(c),u(l)}catch(e){console.error("Failed to fetch data:",e)}finally{C(!1)}};(0,l.useEffect)(()=>{k()},[]);let S=async e=>{if(window.confirm("Are you sure you want to delete this subcategory?"))try{let t=r.$.getInstance();await t.deleteSubCategory(e),await k()}catch(e){console.error("Failed to delete subcategory:",e)}},A=e=>{N(e),f(!0)},_=a.filter(e=>{let t=e.name.toLowerCase().includes(h.toLowerCase()),a="all"===x||e.category_id===x;return t&&a}),E=t=>{let a=e.find(e=>e.id===t);return a?a.name:"Unknown category"};return(0,s.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-gray-900",children:"Sub Categories"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your product sub-categories"})]}),(0,s.jsxs)("button",{onClick:()=>p(!0),className:"bg-orange-500 text-white px-5 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-600 transition",children:[(0,s.jsx)(c.A,{size:18}),"Add Sub Category"]})]}),(0,s.jsx)("div",{className:"border-b mb-6",children:(0,s.jsxs)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:[(0,s.jsxs)("button",{className:"pb-2 px-1 font-medium text-sm whitespace-nowrap ".concat("all"===x?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-800"),onClick:()=>m("all"),children:["All ",(0,s.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-md",children:a.length})]},"all"),e.map(e=>(0,s.jsxs)("button",{className:"pb-2 px-1 font-medium text-sm whitespace-nowrap ".concat(x===e.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-800"),onClick:()=>m(e.id),children:[e.name," ",(0,s.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-md",children:e.count})]},e.id))]})}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative max-w-md",children:[(0,s.jsx)(i.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,s.jsx)("input",{type:"text",placeholder:"Search subcategories...",value:h,onChange:e=>y(e.target.value),className:"w-full pl-11 pr-4 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-orange-500 focus:outline-none transition placeholder-gray-400 text-gray-600"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[_.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition",children:[(0,s.jsx)("div",{className:"h-44 bg-white overflow-hidden flex justify-center items-center",children:(0,s.jsx)("img",{src:e.image_url[0]||"/placeholder.jpg",alt:e.name,className:"w-auto h-full object-fit"})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium text-gray-800",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:w?"Loading...":E(e.category_id)})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>A(e),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full",title:"Edit subcategory",children:(0,s.jsx)(d.A,{size:16})}),(0,s.jsx)("button",{onClick:()=>S(e.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Delete subcategory",children:(0,s.jsx)(n.A,{size:16})})]})]})})]},e.id)),0===_.length&&(0,s.jsx)("div",{className:"col-span-full text-center py-20",children:(0,s.jsx)("p",{className:"text-gray-400 text-base",children:"No subcategories found."})})]}),b&&(0,s.jsx)(o.w,{onClose:()=>p(!1),reload:k}),j&&v&&(0,s.jsx)(g,{onClose:()=>{f(!1),N(null)},reload:k,subCategory:v})]})}},47924:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},59423:(e,t,a)=>{Promise.resolve().then(a.bind(a,31983))},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},84503:(e,t,a)=>{"use strict";a.d(t,{w:()=>d});var s=a(95155),l=a(12115),r=a(54416),c=a(29869),i=a(34355);function d(e){let{onClose:t,reload:a}=e,[d,n]=(0,l.useState)(""),[o,u]=(0,l.useState)([]),[x,g]=(0,l.useState)(""),[m,h]=(0,l.useState)(!1),[y,b]=(0,l.useState)(null),[p,j]=(0,l.useState)([]),[f,v]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{try{let e=i.$.getInstance(),t=await e.getAllCategories();u(t)}catch(e){console.error("Failed to fetch categories:",e)}})()},[]);let N=async()=>{if(!d||!x)return void alert("Please provide a subcategory name and select a category.");h(!0);try{let e=i.$.getInstance(),s=[];if(y){let t=await e.uploadFile(y);s=[...p,t.url]}await e.createNewSubCategory(d,x,s),a(),alert("Subcategory added successfully!"),t()}catch(e){console.error("Failed to add subcategory:",e),alert("Failed to add subcategory.")}finally{h(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"New Sub Category"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(r.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category Name"}),(0,s.jsxs)("select",{value:x,onChange:e=>g(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),o.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sub Category Name"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>n(e.target.value),placeholder:"Enter subcategory name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{var t;let a=(null==(t=e.target.files)?void 0:t[0])||null;b(a),a&&v(URL.createObjectURL(a))},className:"hidden",id:"categoryImageInput"}),(0,s.jsx)("label",{htmlFor:"categoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[f?(0,s.jsx)("img",{src:f,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(c.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:t,disabled:m,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:N,disabled:m,children:m?"Adding...":"Add Sub Category"})]})]})]})})})}},84616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},89917:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[997,355,441,684,358],()=>t(59423)),_N_E=e.O()}]);