(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{13052:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},13717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},39865:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(95155),l=a(12115),r=a(41004),n=a(13717),i=a(62525),c=a(42355),d=a(13052),o=a(66474),m=a(34355);let x=e=>{let{onClose:t,onSubmit:a,initialData:r,isUpdate:n}=e,[i,c]=(0,l.useState)({first_name:(null==r?void 0:r.first_name)||"",last_name:(null==r?void 0:r.last_name)||"",email:(null==r?void 0:r.email)||"",country_code:(null==r?void 0:r.country_code)||"+91",phone_number:(null==r?void 0:r.phone_number)||"",role:(null==r?void 0:r.role)||"cafe_admin",profile_picture:(null==r?void 0:r.profile_picture)||"",created_at:(null==r?void 0:r.created_at)||new Date,updated_at:(null==r?void 0:r.updated_at)||new Date}),[d,x]=(0,l.useState)(null),[p,u]=(0,l.useState)((null==r?void 0:r.profile_picture)||"https://jeevic-prod.s3.ap-south-1.amazonaws.com/jv-uploads/1747773837875-Profile_avatar_placeholder_large.png"),[h,y]=(0,l.useState)(!0),g=(0,l.useRef)(null),f=async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a)try{let e=m.$.getInstance(),t=(await e.uploadFile(a)).url;u(t),c({...i,profile_picture:t}),y(!0)}catch(e){console.error("Error uploading image:",e)}};(0,l.useEffect)(()=>{function e(e){g.current&&!g.current.contains(e.target)&&t()}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t]);let v=async e=>{e.preventDefault();let s=m.$.getInstance();try{n?await s.updateEmployee(r.id,{...i,profile_picture:p}):await s.createEmployee({...i,profile_picture:p}),a(i),t()}catch(e){console.error("Failed to ".concat(n?"update":"create"," employee:"),e)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{ref:g,className:"bg-white rounded-lg w-full max-w-md",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("form",{onSubmit:v,children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,s.jsx)("div",{className:"relative mb-2",children:(0,s.jsx)("img",{src:p||"/placeholder.svg",alt:"Employee",className:"w-24 h-24 rounded-full object-cover border"})}),(0,s.jsxs)("div",{className:"flex space-x-2 py-2",children:[(0,s.jsxs)("label",{className:"cursor-pointer text-sm bg-white border-2 border-gray-300 rounded-md px-2 py-1 text-black",children:["Upload Image",(0,s.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:f})]}),h&&(0,s.jsx)("button",{type:"button",className:"text-sm bg-red-100 rounded-md px-2 py-1 text-red-500",onClick:()=>{u("https://jeevic-prod.s3.ap-south-1.amazonaws.com/jv-uploads/1747773837875-Profile_avatar_placeholder_large.png"),y(!1)},children:"Delete Image"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"First Name"}),(0,s.jsx)("input",{type:"text",value:i.first_name,onChange:e=>c({...i,first_name:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Last Name"}),(0,s.jsx)("input",{type:"text",value:i.last_name,onChange:e=>c({...i,last_name:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Department"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:i.role,onChange:e=>c({...i,role:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800 appearance-none",required:!0,children:[(0,s.jsx)("option",{value:"Cafe_admin",children:"Cafe Admin"}),(0,s.jsx)("option",{value:"ecommerce_admin",children:"Ecommerce Staff"}),(0,s.jsx)("option",{value:"admin",children:"Super admin"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(o.A,{className:"h-4 w-4 text-gray-500"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Email"}),(0,s.jsx)("input",{type:"email",value:i.email,onChange:e=>c({...i,email:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Mobile"}),(0,s.jsx)("input",{type:"tel",value:i.phone_number,onChange:e=>c({...i,phone_number:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full mt-6 py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:n?"Update employee":"Create employee"})]})})})})};function p(e){let{employees:t,onUpdate:a,onDelete:r,search:o}=e,[m,p]=(0,l.useState)(1),[u,h]=(0,l.useState)(null),[y,g]=(0,l.useState)(!1),f=t.filter(e=>e.first_name.toLowerCase().includes(o.toLowerCase())||e.last_name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone_number.includes(o)||e.employeeid.includes(o)),v=10*m,j=v-10,b=f.slice(j,v),N=Math.ceil(f.length/10),w=e=>{window.confirm("Are you sure you want to delete this employee?")&&r(e)},_=e=>{h(e),g(!0)};return(0,s.jsxs)("div",{className:"bg-white border rounded-md overflow-hidden",children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 flex-shrink-0 mr-3",children:(0,s.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.profile_picture||"https://i.pinimg.com/736x/62/7d/7a/627d7ac2d198b462f5a558ac49ecfc9f.jpg",alt:"".concat(e.first_name," ").concat(e.last_name)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"".concat(e.first_name," ").concat(e.last_name)}),(0,s.jsx)("div",{className:"text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded inline-block",children:e.role})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.employeeid}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone_number}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{className:"p-1.5 bg-orange-100 rounded-md text-orange-600 hover:bg-orange-200",onClick:()=>_(e),children:(0,s.jsx)(n.A,{size:16})}),(0,s.jsx)("button",{className:"p-1.5 bg-red-100 rounded-md text-red-600 hover:bg-red-200",onClick:()=>w(e.id),children:(0,s.jsx)(i.A,{size:16})})]})})]},t))})]}),(0,s.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",j+1," to ",Math.min(v,b.length)," of ",b.length," Results"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700 mr-3",children:["Page ",m," of ",N]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:"px-2 py-1 border rounded-l-md bg-gray-100 text-gray-600",onClick:()=>{m>1&&p(m-1)},disabled:1===m,children:(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"px-2 py-1 border-t border-b border-r rounded-r-md bg-gray-100 text-gray-600",onClick:()=>{m<N&&p(m+1)},disabled:m===N,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]})]})]}),y&&u&&(0,s.jsx)(x,{onClose:()=>g(!1),onSubmit:a,isUpdate:!!u,initialData:u})]})}var u=a(47924);function h(){let[e,t]=(0,l.useState)(""),[a,n]=(0,l.useState)(!1),[i,c]=(0,l.useState)([]),d=async()=>{try{let e=m.$.getInstance(),t=await e.getEmployees();c(t.data)}catch(e){console.error("Failed to fetch employees:",e)}},o=async e=>{try{d(),console.log("Employee created/updated successfully")}catch(e){console.error("Failed to create/update employee:",e)}},h=async e=>{try{let t=m.$.getInstance();await t.deleteEmployee(e),d()}catch(e){console.error("Failed to fetch employees:",e)}};return(0,l.useEffect)(()=>{d()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Q,{items:["Employee","Overview"]}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"mt-8 border rounded-lg p-2",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Employee Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Manage all the employees at one place"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search with Employee Name or ID",className:"pl-10 pr-4 py-2 border rounded-md placeholder:text-gray-400 text-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 w-full",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]}),(0,s.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:"New Employee"})]}),(0,s.jsx)(p,{employees:i,onUpdate:o,onDelete:h,search:e})]})}),a&&(0,s.jsx)(x,{onClose:()=>n(!1),isUpdate:!1,initialData:{id:"",first_name:"",last_name:"",email:"",country_code:"+91",phone_number:"",role:"",profile_picture:""},onSubmit:o})]})}},41004:(e,t,a)=>{"use strict";a.d(t,{Q:()=>i});var s=a(95155),l=a(6874),r=a.n(l),n=a(13052);function i(e){let{items:t}=e;return(0,s.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:t.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[a>0&&(0,s.jsx)(n.A,{size:16,className:"mx-2 text-black"}),(0,s.jsx)(r(),{href:"#",className:"".concat(a===t.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"),children:e})]},a))})}},42355:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},46131:(e,t,a)=>{Promise.resolve().then(a.bind(a,39865))},47924:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},66474:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[997,95,355,441,684,358],()=>t(46131)),_N_E=e.O()}]);