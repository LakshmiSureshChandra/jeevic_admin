(()=>{var e={};e.id=317,e.ids=[317],e.modules={1303:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},28458:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Charan Kosari\\\\Desktop\\\\jeevic_admin\\\\app\\\\operations\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\operations\\page.tsx","default")},28986:(e,t,s)=>{Promise.resolve().then(s.bind(s,28458))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29322:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(60687),r=s(43210),l=s(39192),i=s(88233),n=s(47601),d=s(77490);function c({tabs:e,onCategoryDeleted:t}){let[s,l]=(0,r.useState)(null),{showPopup:c,showConfirm:o}=(0,d.O)();if(!e)return(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})});let m=async(s,a)=>{if(a.stopPropagation(),"all-items"===s)return void c("Cannot delete 'All Items' category",{type:"warning"});try{let a=localStorage.getItem("access_token"),r=n.$.getInstance(a||""),i=(await r.getDishes()).filter(e=>e.dish_category_id===s),d=e.find(e=>e.id===s),m=d?d.name:"this category",u=`Are you sure you want to delete "${m}"? This will also delete ${i.length} dish${1!==i.length?"es":""} in this category.`;o(u,async()=>{l(s);let e=i.map(e=>r.deleteDish(e.id));await Promise.all(e),await r.deleteDishCategory(s),console.log(`Deleted category ${s} and ${i.length} associated dishes`),c(`Successfully deleted "${m}" and ${i.length} associated dishes`,{type:"success"}),t&&await t()},{title:"Delete Category",confirmText:"Delete",cancelText:"Cancel"})}catch(e){console.error("Error deleting category:",e),c("Failed to delete category. Please try again.",{type:"error"})}finally{l(null)}};return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:e.map(e=>(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-lg cursor-pointer group",children:[(0,a.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-full h-40 object-cover transition-transform duration-300 group-hover:scale-110"}),(0,a.jsxs)("div",{className:"absolute inset-0  flex flex-col justify-end p-3",children:[(0,a.jsx)("h3",{className:"text-white font-bold text-lg",children:e.name}),(0,a.jsx)("div",{className:"bg-white text-black rounded-full w-6 h-6 flex items-center justify-center text-xs absolute top-3 right-3",children:e.count}),"all-items"!==e.id&&(0,a.jsx)("button",{onClick:t=>m(e.id,t),disabled:s===e.id,className:"absolute top-3 left-3 p-1.5 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700",title:"Delete category",children:s===e.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(i.A,{size:16})})]})]},e.id))})}function o({tabs:e,setActiveTab:t,activeTab:s}){return e?(0,a.jsx)("div",{className:"border-b mb-6",children:(0,a.jsx)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:e.map(e=>(0,a.jsxs)("button",{className:`pb-2 px-1 font-medium text-sm whitespace-nowrap ${s===e.id?"text-orange-500 border-b-2 border-orange-500":"text-black hover:text-gray-800"}`,onClick:()=>t(e.id),children:[e.name," ",(0,a.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:e.count})]},e.id))})}):(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})})}var m=s(14952),u=s(96474),x=s(11860),h=s(62688);let g=(0,h.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),p=(0,h.A)("arrow-up-to-line",[["path",{d:"M5 3h14",key:"7usisc"}],["path",{d:"m18 13-6-6-6 6",key:"1kf1n9"}],["path",{d:"M12 7v14",key:"1akyts"}]]);function f({isLoading:e,dishes:t,setDishes:s,categories:l,activeTab:c,refreshData:o,onDishDeleted:h}){let[f,b]=(0,r.useState)(t),[y,j]=(0,r.useState)({}),[v,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),[D,S]=(0,r.useState)(null),[A,P]=(0,r.useState)(null),I=(0,r.useRef)(null),[M,z]=(0,r.useState)({name:"",price:0,dish_category_id:"",id:"",is_available:!1,is_non_veg:!1,meta_data:{},picture:"",created_at:new Date,updated_at:new Date}),{showPopup:E,showConfirm:L}=(0,d.O)(),[T,$]=(0,r.useState)(""),[F,B]=(0,r.useState)(""),[G,q]=(0,r.useState)(""),[O,U]=(0,r.useState)(!1),[K,R]=(0,r.useState)(!0),[V,J]=(0,r.useState)(""),[Q,W]=(0,r.useState)(null),H=(0,r.useRef)(null),[X,Y]=(0,r.useState)(!1),Z=async e=>{try{let s=t.find(t=>t.id===e);if(!s)return;let a=localStorage.getItem("access_token"),r=n.$.getInstance(a);j(t=>({...t,[e]:!t[e]})),await r.updateDish(e,{...s,is_available:!y[e]}),o&&await o()}catch(t){j(t=>({...t,[e]:!t[e]})),E("Failed to update availability",{type:"error"})}},ee=e=>{_(e),z(e),N(!0)},et=()=>{N(!1),_(null)},es=()=>{k(!1),$(""),J(""),W(null),R(!0),Y(!1)},ea=e=>{let{name:t,value:s}=e.target;z(e=>({...e,[t]:"price"===t?Number(s)||0:s}))},er=async(e,t)=>{t.stopPropagation(),L("Are you sure you want to delete this dish?",async()=>{try{S(e);let t=localStorage.getItem("access_token"),s=n.$.getInstance(t||"");await s.deleteDish(e),h&&h(e),o&&await o(),E("Dish deleted successfully",{type:"success"})}catch(e){console.error("Error deleting dish:",e),E("Failed to delete the dish. Please try again.",{type:"error"})}finally{S(null)}},{title:"Delete Dish",confirmText:"Delete",cancelText:"Cancel"})},el=async()=>{let e=n.$.getInstance();if(Q)try{let t=await e.uploadFile(Q),a={id:Date.now().toString(),name:T,price:Number(V)||0,picture:t.url,is_available:K,dish_category_id:F,is_non_veg:O,meta_data:{},created_at:new Date,updated_at:new Date},r=await e.createDish(a);s(r),o&&await o(),es()}catch(e){console.error("Error adding new product:",e)}},ei=async(e,t)=>{try{let s=localStorage.getItem("access_token");if(!s)return void E("Authentication required",{type:"error"});let a=n.$.getInstance(s);await a.updateDish(e,{name:t.name,price:t.price,picture:t.picture,dish_category_id:t.dish_category_id,is_available:t.is_available,is_non_veg:t.is_non_veg,meta_data:t.meta_data||{}}),E("Dish updated successfully",{type:"success"}),o&&await o()}catch(e){E(e instanceof Error?e.message:"Failed to update dish",{type:"error"})}},en=async e=>{if(e.target.files&&e.target.files[0]){P(e.target.files[0]);try{let t=n.$.getInstance(),s=await t.uploadFile(e.target.files[0]);z(e=>({...e,picture:s.url}))}catch(e){console.error("Error uploading image:",e),E("Failed to upload image",{type:"error"})}}};return e?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 border-4 border-gray-200 border-t-4 border-t-blue-500 rounded-full animate-spin",children:"Loading..."})}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden shadow hover:shadow-md transition-shadow cursor-pointer relative group",onClick:()=>{ee(e)},children:[(0,a.jsxs)("div",{className:"h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:e.picture,alt:e.name,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:t=>er(e.id,t),disabled:D===e.id,className:"absolute top-3 right-3 p-1.5 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700 z-10",title:"Delete dish",children:D===e.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(i.A,{size:16})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 text-lg",children:e.name}),(0,a.jsxs)("p",{className:"text-black",children:["â‚¹ ",e.price]})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)("button",{className:"text-orange-500 text-sm flex items-center hover:underline",children:["Advanced settings ",(0,a.jsx)(m.A,{size:16})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,a.jsx)("span",{className:"text-sm text-black",children:y[e.id]?"Available":"Unavailable"}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:y[e.id],onChange:()=>Z(e.id)}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})]})]},e.id)),(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden border-dashed flex items-center justify-center h-full min-h-[300px]",children:(0,a.jsxs)("button",{onClick:()=>k(!0),className:"flex flex-col items-center text-black hover:text-orange-500 transition-colors",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-current flex items-center justify-center mb-2",children:(0,a.jsx)(u.A,{size:24})}),(0,a.jsx)("span",{className:"text-sm",children:"Add new product"})]})})]}),v&&C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 text-gray-800 bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:et,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"h-48 overflow-hidden",children:[(0,a.jsx)("img",{src:M.picture,alt:M.name,className:"w-full h-full object-cover"}),(0,a.jsx)("button",{className:"absolute top-4 right-4 bg-white rounded-full p-2 shadow-md hover:bg-gray-100",onClick:et,children:(0,a.jsx)(x.A,{size:20,className:"text-gray-800"})}),(0,a.jsx)("button",{onClick:()=>{I.current?.click()},className:"absolute top-4 left-4 bg-white rounded-lg px-4 py-2 shadow-md hover:bg-gray-100 cursor-pointer",children:(0,a.jsx)("span",{children:"Update Image"})}),(0,a.jsx)("input",{ref:I,type:"file",onChange:en,className:"hidden",accept:"image/*"})]})}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C&&et()},className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Name"}),(0,a.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(g,{size:16})})]}),(0,a.jsx)("input",{type:"text",name:"name",value:M.name,onChange:ea,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Category"})}),(0,a.jsx)("input",{type:"text",disabled:!0,name:"category",value:l.find(e=>e.id===M.dish_category_id)?.name||"",onChange:ea,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"block text-gray-500",children:"Product Price"}),(0,a.jsx)("button",{type:"button",className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(g,{size:16})})]}),(0,a.jsxs)("div",{className:"relative mt-1",children:[(0,a.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:"â‚¹"}),(0,a.jsx)("input",{type:"number",name:"price",value:M.price,onChange:ea,className:"pl-8 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 p-2 border"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),C&&er(C.id,e)},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-500 hover:bg-red-600 flex items-center",disabled:D===C.id,children:[D===C.id?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,a.jsx)(i.A,{size:16,className:"mr-2"}),"Delete Dish"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{type:"button",onClick:et,className:"mr-3 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-500 hover:bg-orange-600",onClick:()=>ei(M.id,M),children:"Save Changes"})]})]})]})]})}),w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:es,children:(0,a.jsx)("div",{className:"max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"font-bold text-gray-800 text-lg mb-4",children:"Product Details"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Product Name"}),(0,a.jsx)("input",{type:"text",value:T,onChange:e=>$(e.target.value),className:"w-full p-2 border text-gray-600 border-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Name"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>Y(!X),className:"w-full p-2 border border-gray-300 rounded pr-8 text-gray-500 text-left flex justify-between items-center",children:[(0,a.jsx)("span",{children:G}),(0,a.jsx)("div",{className:"text-gray-400",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"m6 9 6 6 6-6"})})})]}),X&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border text-gray-500 border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:l.map(e=>(0,a.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>{B(e.id),q(e.name),Y(!1)},children:e.name},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm px-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Make it visible for the user"}),(0,a.jsx)("button",{type:"button",onClick:()=>R(!K),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${K?"bg-orange-500":"bg-gray-200"}`,children:(0,a.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${K?"translate-x-6":"translate-x-1"}`})})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800 mb-1",children:"Product Image"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mb-2",children:"This will be the cover image for the users and admins"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300  rounded-md p-6 flex flex-col items-center justify-center",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]&&W(e.dataTransfer.files[0])},children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(p,{className:"text-gray-400",size:20})}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["Drag and Drop the Images here or"," ",(0,a.jsx)("button",{className:"text-blue-500",onClick:()=>{H.current?.click()},children:"Select file"})]}),(0,a.jsx)("input",{ref:H,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&W(e.target.files[0])},className:"hidden",accept:"image/*"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:"All formats Supported (PNG, JPG, JPEG, MP4 and MOV)"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Product Price(â‚¹)"}),(0,a.jsx)("input",{type:"text",value:V,onChange:e=>J(e.target.value),className:"w-full p-2 border border-gray-300 text-gray-500 rounded"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Is Non Veg?"}),(0,a.jsx)("input",{type:"checkbox",checked:O,onChange:e=>U(e.target.checked),className:"w-full p-2 border border-gray-300 text-gray-500 rounded"})]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{onClick:es,className:"flex-1 py-3 bg-gray-100 text-gray-800 font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:el,className:"flex-1 bg-orange-500 text-white py-3 font-medium hover:bg-orange-600 transition-colors",children:"Add Item"})]})]})})})]})}var b=s(1303);function y({closeAction:e,categories:t,setCategories:s,onCategoryAdded:l}){let[i,d]=(0,r.useState)(""),[c,o]=(0,r.useState)(null),m=(0,r.useRef)(null),u=async()=>{let a=n.$.getInstance();if(!c)return;let r=await a.uploadFile(c);s([...t,await a.createDishCategory(i,r.url)]),l&&await l(),e()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-md",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Category Details"}),(0,a.jsx)("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(x.A,{size:24})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Name"}),(0,a.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"w-full p-2 border text-gray-400 border-gray-300 rounded",placeholder:"Enter category name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-600 text-sm mb-1",children:"Category Image"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mb-2",children:"This will be the cover image for the users and admins"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded p-6 flex flex-col items-center justify-center",onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault(),e.dataTransfer.files&&e.dataTransfer.files[0]&&o(e.dataTransfer.files[0])},children:[c?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Selected file:"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-800",children:c.name})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)(p,{className:"text-gray-400",size:20})}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center",children:["Drag and Drop the images here or"," ",(0,a.jsx)("button",{type:"button",className:"text-blue-500 hover:text-blue-600",onClick:()=>{m.current?.click()},children:"Select file"})]})]}),(0,a.jsx)("input",{ref:m,type:"file",onChange:e=>{e.target.files&&e.target.files[0]&&o(e.target.files[0])},className:"hidden",accept:"image/*"})]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs mt-2",children:"All formats Supported (PNG, JPG, JPEG, MP4 and MOV)"})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,a.jsx)("button",{onClick:e,className:"flex-1 py-2 border border-gray-300 rounded text-gray-800 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:u,className:"flex-1 py-2 bg-orange-500 text-white rounded hover:bg-orange-600",children:"Add Category"})]})]})})})}function j(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),{showPopup:m}=(0,d.O)(),u=async()=>{try{let e=n.$.getInstance(),s=(await e.getBanners()).map(e=>({...e,image_url:e.image}));t(s)}catch(e){console.error("Error fetching banners:",e),m("Failed to fetch banners",{type:"error"})}},h=async()=>{if(!c)return void m("Please provide an image",{type:"warning"});try{let e=n.$.getInstance(),t=new FormData;t.append("file",c),await e.createBanner(t),l(!1),o(null),u(),m("Banner added successfully",{type:"success"})}catch(e){console.error("Error adding banner:",e),m("Failed to add banner",{type:"error"})}},g=async e=>{try{let t=n.$.getInstance();await t.deleteBanner(e),u(),m("Banner deleted successfully",{type:"success"})}catch(e){console.error("Error deleting banner:",e),m("Failed to delete banner",{type:"error"})}};return(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-xl text-black mb-4",children:"Banner Management"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("img",{src:e.image_url,alt:"Banner",className:"w-full h-40 object-cover rounded-lg mb-2"}),(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{onClick:()=>g(e.id),className:"text-red-500",children:(0,a.jsx)(i.A,{size:18})})})]},e.id)),(0,a.jsxs)("div",{className:"border rounded-lg p-4 flex items-center justify-center cursor-pointer",onClick:()=>l(!0),children:[(0,a.jsx)(b.A,{size:24,className:"text-gray-400"}),(0,a.jsx)("span",{className:"ml-2 text-gray-400",children:"Add New Banner"})]})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0  backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg text-black ",children:"Add New Banner"}),(0,a.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(x.A,{size:24})})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>o(e.target.files?.[0]||null),className:"w-full p-2 border rounded mb-4"}),(0,a.jsx)("button",{onClick:h,className:"w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600",children:"Add Banner"})]})})]})}function v(){let[e,t]=(0,r.useState)(!1),[s,i]=(0,r.useState)([]),[d,m]=(0,r.useState)([]),[u,x]=(0,r.useState)([]),[h,g]=(0,r.useState)("ALL ITEMS"),[p,v]=(0,r.useState)(!0),N=async e=>{try{let t=n.$.getInstance(e),s=await t.getDishCategories(),a=await t.getDishes(),r=s.map(e=>({id:e.id,name:e.name,count:a.filter(t=>t.dish_category_id===e.id).length,image:e.picture||"/placeholder-image.png"})),l={id:"all-items",name:"ALL ITEMS",count:a.length,image:"/menu-card.png"};m(s),i(a),x([l,...r]),"ALL ITEMS"===h||s.some(e=>e.id===h)||g("ALL ITEMS")}catch(e){console.error("Error fetching data:",e)}},w=async()=>{let e=localStorage.getItem("access_token");e&&(await N(e),v(!1))},k=async()=>{await w(),g("ALL ITEMS")},C=e=>{x(t=>t.map(t=>"ALL ITEMS"===t.name||t.id===e.dish_category_id?{...t,count:t.count+1}:t))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Q,{items:["Cafe","Operations"]}),(0,a.jsxs)("main",{className:"flex-1 p-6 ",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"h-5 w-5 text-black mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),(0,a.jsx)("h2",{className:"text-gray-700 text-lg font-medium",children:"Menu"})]}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"flex items-center px-4 py-2 bg-gray-100 rounded-full text-sm text-gray-700 font-medium hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"New Category"]})]}),(0,a.jsx)(c,{tabs:u,onCategoryDeleted:k}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg text-gray-700 font-medium mb-4",children:"Items"}),(0,a.jsx)(o,{activeTab:h,setActiveTab:g,tabs:u}),(0,a.jsx)(f,{isLoading:p,dishes:(()=>{if("ALL ITEMS"===h)return s;{let e=d.find(e=>e.id===h);return e?s.filter(t=>t.dish_category_id===e.id):s}})(),setDishes:e=>{i(t=>[...t,e]),C(e)},categories:d,activeTab:h,refreshData:w,onDishDeleted:e=>{let t=s.find(t=>t.id===e);i(t=>t.filter(t=>t.id!==e)),t&&x(e=>e.map(e=>"ALL ITEMS"===e.name||e.id===t.dish_category_id?{...e,count:e.count-1}:e))}})]}),(0,a.jsx)(j,{}),e&&(0,a.jsx)(y,{closeAction:()=>t(!1),categories:d,setCategories:m,onCategoryAdded:w})]})]})}},33873:e=>{"use strict";e.exports=require("path")},39192:(e,t,s)=>{"use strict";s.d(t,{Q:()=>n});var a=s(60687),r=s(85814),l=s.n(r),i=s(14952);function n({items:e}){return(0,a.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:e.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[s>0&&(0,a.jsx)(i.A,{size:16,className:"mx-2 text-black"}),(0,a.jsx)(l(),{href:"#",className:`${s===e.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"}`,children:t})]},s))})}},46055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69154:(e,t,s)=>{Promise.resolve().then(s.bind(s,29322))},70265:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=s(65239),r=s(48088),l=s(88170),i=s.n(l),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c={children:["",{children:["operations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28458)),"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\operations\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\operations\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/operations/page",pathname:"/operations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79551:e=>{"use strict";e.exports=require("url")},88233:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,273,658,506],()=>s(70265));module.exports=a})();