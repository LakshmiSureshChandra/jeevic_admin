(()=>{var e={};e.id=210,e.ids=[210],e.modules={1303:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},1397:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=s(65239),r=s(48088),l=s(88170),n=s.n(l),i=s(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d={children:["",{children:["coupon-codes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36881)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\coupon-codes\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\coupon-codes\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/coupon-codes/page",pathname:"/coupon-codes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\chand\\\\OneDrive\\\\Desktop\\\\jeevic_admin\\\\app\\\\coupon-codes\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\coupon-codes\\page.tsx","default")},39192:(e,t,s)=>{"use strict";s.d(t,{Q:()=>i});var a=s(60687),r=s(85814),l=s.n(r),n=s(14952);function i({items:e}){return(0,a.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:e.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[s>0&&(0,a.jsx)(n.A,{size:16,className:"mx-2 text-black"}),(0,a.jsx)(l(),{href:"#",className:`${s===e.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"}`,children:t})]},s))})}},46055:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},64307:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(60687),r=s(39192),l=s(62688);let n=(0,l.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var i=s(41312),o=s(43210);function d({title:e,value:t,change:s,icon:r}){return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[r,(0,a.jsx)("span",{className:"text-sm text-gray-800 ml-2",children:e})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:t}),void 0!==s&&(0,a.jsxs)("div",{className:`flex items-center text-sm ${s>0?"text-green-500":"text-red-500"}`,children:[(0,a.jsxs)("span",{children:[s>0?"+":"",s,"%"]}),(0,a.jsx)("svg",{className:`h-4 w-4 ml-1 ${s>0?"":"transform rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})]})]})]})}function c({totalCoupons:e,totalUses:t,loading:s}){return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(d,{title:"Total Coupons",value:s?"...":e.toString(),icon:(0,a.jsx)(n,{className:"h-5 w-5 text-gray-500"})}),(0,a.jsx)(d,{title:"Total Uses Remaining",value:s?"...":t.toString(),icon:(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-500"})})]})}var x=s(99270);function m({activeTab:e,setActiveTab:t,searchTerm:s,setSearchTerm:r,totalCoupons:l,activeCoupons:n,inactiveCoupons:i}){return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4",children:[(0,a.jsx)("div",{className:"border-b mb-4 md:mb-0",children:(0,a.jsx)("div",{className:"flex space-x-6",children:[{id:"all",label:"All Coupons",count:l},{id:"active",label:"Active Coupons",count:n},{id:"inactive",label:"Inactive Coupons",count:i}].map(s=>(0,a.jsxs)("button",{className:`pb-2 px-1 font-medium text-sm ${e===s.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-800 hover:text-gray-600"}`,onClick:()=>t(s.id),children:[s.label,null!==s.count&&(0,a.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-full",children:s.count})]},s.id))})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for Code, Title, Validity",className:"pl-10 pr-4 py-2 text-gray-800 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 w-full md:w-64",value:s,onChange:e=>r(e.target.value)}),(0,a.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})]})}let u=(0,l.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var p=s(63143),h=s(88233);function g({coupon:e,mode:t,position:s,onClose:r,onUpdate:l}){let[n,i]=(0,o.useState)(e),d="hover"===t&&s?{position:"fixed",left:`${s.x}px`,top:`${s.y+24}px`,zIndex:50,width:"300px"}:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:50,width:"300px"};return(0,a.jsxs)(a.Fragment,{children:["popup"===t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 bg-opacity-50 z-40",onClick:r}),(0,a.jsxs)("div",{className:`
          bg-white border rounded-md shadow-lg
          ${"hover"===t?"p-3":"p-4"}
        `,style:d,children:["popup"===t&&(0,a.jsxs)("div",{className:"flex justify-between items-center border-b pb-3 mb-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-800",children:"Coupon Details"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"hover"===t?"text-sm":"",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"COUPON ID"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:n.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"CODE"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:n.code})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"NO. OF USES REMAINING"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:n.no_of_uses})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"DISCOUNT TYPE"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:n.meta_data.discountType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"DISCOUNT VALUE"}),(0,a.jsx)("div",{className:"font-medium text-gray-800",children:n.meta_data.discountAmount})]})]})]})]})]})}var y=s(47601),j=s(11860);function v({coupon:e,onClose:t,onUpdated:s}){let[r,l]=(0,o.useState)(""),[n,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)(""),[x,m]=(0,o.useState)(""),[u,p]=(0,o.useState)("percentage"),[h,g]=(0,o.useState)(""),[v,b]=(0,o.useState)(""),[f,N]=(0,o.useState)([]),w=(e,t)=>{N(s=>s.map((s,a)=>a===e?t:s))},C=e=>{N(t=>t.filter((t,s)=>s!==e))},k=async a=>{a.preventDefault();let l={code:r,is_one_time:n,expires_on:new Date(x),no_of_uses:"unlimited"===d?Number.MAX_SAFE_INTEGER:Number(d),meta_data:{discountType:u,discountAmount:h,minimumCartValue:v,terms:JSON.stringify(f)}};await y.$.getInstance().updateCoupon(e.id,l),await s(),t()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-auto",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Edit Coupon"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:(0,a.jsx)(j.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Enter coupon code",className:"w-full border rounded-md px-3 py-2 text-gray-800"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Coupon ID will be generated automatically"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-800",children:"One Time Use Per User"}),(0,a.jsx)("div",{className:"relative inline-flex items-center cursor-pointer",children:(0,a.jsx)("div",{className:`w-10 h-5 rounded-full ${n?"bg-orange-500":"bg-gray-200"}`,onClick:()=>i(!n),children:(0,a.jsx)("div",{className:`absolute w-3.5 h-3.5 bg-white rounded-full top-[3px] transition-transform ${n?"translate-x-[22px]":"translate-x-[3px]"}`})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Total No. Of Uses"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number",value:d,onChange:e=>c(e.target.value),placeholder:"total number uses",className:"w-full border rounded-md px-3 py-2 text-gray-800"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiry"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"date",value:x,onChange:e=>m(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Discount Details"}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"discountType",checked:"percentage"===u,onChange:()=>p("percentage"),className:"mr-2 text-orange-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:"Percentage%"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"discountType",checked:"flat"===u,onChange:()=>p("flat"),className:"mr-2 text-orange-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:"Flat Discount(₹)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Flat Discount Amount(₹)"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Minimum Cart Value"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>b(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Terms & Conditions"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md max-h-40 overflow-y-auto",children:[(0,a.jsx)("ol",{className:"list-decimal pl-5 text-sm text-gray-800 space-y-2",children:f.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>w(t,e.target.value),className:"flex-1 border rounded-md px-2 py-1 text-gray-800"}),f.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>C(t),className:"text-red-500 hover:text-red-700 px-2","aria-label":"Remove term",children:"\xd7"})]},t))}),(0,a.jsx)("button",{type:"button",onClick:()=>{N(e=>[...e,""])},className:"mt-2 text-orange-500 hover:underline text-xs",children:"+ Add Term"})]})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full mt-6 py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:"Update"})]})]})})})}function b({coupons:e,reload:t}){let[s,r]=(0,o.useState)(null),[l,n]=(0,o.useState)(null),[i,d]=(0,o.useState)({x:0,y:0}),[c,x]=(0,o.useState)(null),[m,j]=(0,o.useState)(1),b=Math.ceil(e.length/10),f=async()=>{m>1&&j(m-1)},N=async()=>{m<b&&j(m+1)},w=(e,t)=>{let s=e.currentTarget.getBoundingClientRect();d({x:s.left+window.scrollX,y:s.top+window.scrollY}),r(t)},C=()=>{r(null)},k=e=>{n(e),r(null)},_=async e=>{if(window.confirm("Are you sure you want to delete this coupon?"))try{await y.$.getInstance().deleteCoupon(e),await t()}catch(e){console.error("Failed to delete coupon",e)}};return(0,a.jsxs)("div",{className:"bg-white border rounded-md overflow-hidden",children:[(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Coupon ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Coupon Code"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Expiry Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Last Updated"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Created At"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-800 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.slice((m-1)*10,10*m).map((e,t)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.id,(0,a.jsx)("button",{className:"ml-2 text-gray-400 hover:text-gray-600",onMouseEnter:t=>w(t,e),onMouseLeave:C,onClick:()=>k(e),children:(0,a.jsx)(u,{size:16})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:e.code}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:e.expires_on?new Date(e.expires_on).toLocaleDateString():""}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:e.updated_at?new Date(e.updated_at).toLocaleDateString():""}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:e.created_at?new Date(e.created_at).toLocaleDateString():""}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-800",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{className:"text-gray-600 hover:text-gray-800 flex items-center",onClick:()=>x(e),children:[(0,a.jsx)(p.A,{size:16,className:"mr-1"}),"Update"]}),(0,a.jsx)("button",{className:"text-red-500 hover:text-red-700",onClick:()=>_(e.id),children:(0,a.jsx)(h.A,{size:16})})]})})]},t))})]}),(0,a.jsxs)("div",{className:"px-6 py-3 flex items-center justify-end border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",m," of ",b]}),(0,a.jsxs)("div",{className:"ml-4 flex",children:[(0,a.jsx)("button",{className:"px-2 py-1 border rounded-l-md bg-gray-100 text-gray-600",onClick:f,disabled:1===m,children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("button",{className:"px-2 py-1 border-t border-b border-r rounded-r-md bg-gray-100 text-gray-600",onClick:N,disabled:m===b,children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),s&&!l&&(0,a.jsx)(g,{coupon:s,position:i,mode:"hover"}),l&&(0,a.jsx)(g,{coupon:l,onClose:()=>n(null),mode:"popup"}),c&&(0,a.jsx)(v,{coupon:c,onClose:()=>x(null),onUpdated:t})]})}var f=s(1303);function N({onClose:e}){let[t,s]=(0,o.useState)(""),[r,l]=(0,o.useState)(!0),[n,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[x,m]=(0,o.useState)("percentage"),[u,p]=(0,o.useState)(""),[h,g]=(0,o.useState)(""),[v,b]=(0,o.useState)(["20% off up to ₹999 on orders above ₹4000.","Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."]),f=(e,t)=>{b(s=>s.map((s,a)=>a===e?t:s))},N=e=>{b(t=>t.filter((t,s)=>s!==e))},w=async s=>{s.preventDefault();let a={code:t,is_one_time:r,expires_on:new Date(d),no_of_uses:"unlimited"===n?Number.MAX_SAFE_INTEGER:Number(n),meta_data:{discountType:x,discountAmount:u,minimumCartValue:h,terms:JSON.stringify(v)}};await y.$.getInstance().createCoupon(a),e()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overlow-auto scrollbar-thin scrollbar-thumb-orange-400 scrollbar-track-gray-200",children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-thumb-orange-400 scrollbar-track-gray-200",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Coupon Code"}),(0,a.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:(0,a.jsx)(j.A,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:w,children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),placeholder:"Enter coupon code",className:"w-full border rounded-md px-3 py-2 text-gray-800"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Coupon ID will be generated automatically"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-800",children:"One Time Use Per User"}),(0,a.jsx)("div",{className:"relative inline-flex items-center cursor-pointer",children:(0,a.jsx)("div",{className:`w-10 h-5 rounded-full ${r?"bg-orange-500":"bg-gray-200"}`,onClick:()=>l(!r),children:(0,a.jsx)("div",{className:`absolute w-3.5 h-3.5 bg-white rounded-full top-[3px] transition-transform ${r?"translate-x-[22px]":"translate-x-[3px]"}`})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Total No. Of Uses"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number",value:n,onChange:e=>i(e.target.value),placeholder:"total number uses",className:"w-full border rounded-md px-3 py-2 text-gray-800"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiry"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"date",value:d,onChange:e=>c(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Discount Details"}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"discountType",checked:"percentage"===x,onChange:()=>m("percentage"),className:"mr-2 text-orange-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:"Percentage%"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"discountType",checked:"amount"===x,onChange:()=>m("amount"),className:"mr-2 text-orange-500"}),(0,a.jsx)("span",{className:"text-gray-800",children:"Flat Discount(₹)"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"amount"===x?"Flat Discount price":"Discount percentage"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Minimum Cart Value"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Terms & Conditions"}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md ",children:[(0,a.jsx)("ol",{className:"list-decimal pl-5 text-sm text-gray-800 space-y-2",children:v.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>f(t,e.target.value),className:"flex-1 border rounded-md px-2 py-1 text-gray-800"}),v.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>N(t),className:"text-red-500 hover:text-red-700 px-2","aria-label":"Remove term",children:"\xd7"})]},t))}),(0,a.jsx)("button",{type:"button",onClick:()=>{b(e=>[...e,""])},className:"mt-2 text-orange-500 hover:underline text-xs",children:"+ Add Term"})]})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full mt-6 py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:w,children:"Create"})]})]})})})}function w(){let[e,t]=(0,o.useState)(!1),[s,l]=(0,o.useState)([]),[n,i]=(0,o.useState)(!1),[d,x]=(0,o.useState)(""),[u,p]=(0,o.useState)("all"),h=async()=>{i(!0);try{let e=y.$.getInstance(),t=await e.getCoupons();l(t)}finally{i(!1)}},g=(0,o.useMemo)(()=>{let e=s;return"active"===u?e=e.filter(e=>e.no_of_uses>0&&(!e.expires_on||new Date(e.expires_on)>new Date)):"inactive"===u&&(e=e.filter(e=>0===e.no_of_uses||e.expires_on&&new Date(e.expires_on)<=new Date)),d&&(e=e.filter(e=>e.code.toLowerCase().includes(d.toLowerCase())||(e.meta_data?.title||"").toLowerCase().includes(d.toLowerCase()))),e},[s,u,d]),j=s.length,v=s.reduce((e,t)=>e+(t.no_of_uses||0),0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Q,{items:["Marketing","Coupon Codes"]}),(0,a.jsxs)("main",{className:"flex-1 p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-xl font-medium text-gray-800",children:"Coupon Codes"}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"flex items-center px-4 py-2 bg-gray-100 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors text-gray-800",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"New Coupon Code"]})]}),(0,a.jsx)(c,{totalCoupons:j,totalUses:v,loading:n}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"All Coupons"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage all your coupon codes here"})]}),(0,a.jsx)(m,{activeTab:u,setActiveTab:p,searchTerm:d,setSearchTerm:x,totalCoupons:j,activeCoupons:s.filter(e=>e.no_of_uses>0&&(!e.expires_on||new Date(e.expires_on)>new Date)).length,inactiveCoupons:s.filter(e=>0===e.no_of_uses||e.expires_on&&new Date(e.expires_on)<=new Date).length}),(0,a.jsx)(b,{coupons:g,reload:h})]})]}),e&&(0,a.jsx)(N,{onClose:()=>{h(),t(!1)}})]})}},65996:(e,t,s)=>{Promise.resolve().then(s.bind(s,36881))},72076:(e,t,s)=>{Promise.resolve().then(s.bind(s,64307))},79551:e=>{"use strict";e.exports=require("url")},88233:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},99270:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,661,658,286],()=>s(1397));module.exports=a})();