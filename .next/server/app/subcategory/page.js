(()=>{var e={};e.id=399,e.ids=[399],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10305:(e,t,a)=>{"use strict";a.d(t,{w:()=>d});var s=a(60687),r=a(43210),l=a(11860),i=a(16023),n=a(47601);function d({onClose:e,reload:t}){let[a,d]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),[u,x]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[b,y]=(0,r.useState)([]),[j,v]=(0,r.useState)(""),f=async()=>{if(!a||!u)return void alert("Please provide a subcategory name and select a category.");g(!0);try{let s=n.$.getInstance(),r=[];if(p){let e=await s.uploadFile(p);r=[...b,e.url]}await s.createNewSubCategory(a,u,r),t(),alert("Subcategory added successfully!"),e()}catch(e){console.error("Failed to add subcategory:",e),alert("Failed to add subcategory.")}finally{g(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"New Sub Category"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(l.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category Name"}),(0,s.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),o.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sub Category Name"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>d(e.target.value),placeholder:"Enter subcategory name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{let t=e.target.files?.[0]||null;h(t),t&&v(URL.createObjectURL(t))},className:"hidden",id:"categoryImageInput"}),(0,s.jsx)("label",{htmlFor:"categoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[j?(0,s.jsx)("img",{src:j,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(i.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:e,disabled:m,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:f,disabled:m,children:m?"Adding...":"Add Sub Category"})]})]})]})})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16023:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30662:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(60687),r=a(43210),l=a(47601),i=a(96474),n=a(99270),d=a(57175),o=a(88233),c=a(10305),u=a(11860),x=a(16023);function m({onClose:e,reload:t,subCategory:a}){let[i,n]=(0,r.useState)(a.name),[d,c]=(0,r.useState)(a.category_id),[m,g]=(0,r.useState)([]),[p,h]=(0,r.useState)(""),[b,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(!1),[f,N]=(0,r.useState)(a.image_url),w=async()=>{if(!i||!d)return void alert("Please provide a subcategory name and select a category.");v(!0);try{let s=l.$.getInstance(),r=[...f];if(b){let e=await s.uploadFile(b);r.push(e.url)}await s.updateSubCategory(a.id,i,d,r),t(),alert("Subcategory updated successfully!"),e()}catch(e){console.error("Failed to update subcategory:",e),alert("Failed to update subcategory.")}finally{v(!1)}},C=e=>{N(f.filter((t,a)=>a!==e))};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-lg w-full max-w-lg",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Sub Category"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:(0,s.jsx)(u.A,{size:24})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"w-full border rounded-md px-3 py-2 text-gray-800",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),m.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sub Category Name"}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Enter subcategory name",className:"w-full border rounded-md px-3 py-2 text-gray-800"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Existing Images"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mb-4",children:f.map((e,t)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:e,alt:`SubCategory ${t+1}`,className:"h-24 w-24 object-cover rounded-md"}),(0,s.jsx)("button",{onClick:()=>C(t),className:"absolute -top-2 -right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600",children:(0,s.jsx)(o.A,{size:16})})]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Add New Image"}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-md p-4 flex flex-col items-center justify-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{let t=e.target.files?.[0]||null;y(t),t&&h(URL.createObjectURL(t))},className:"hidden",id:"subCategoryImageInput"}),(0,s.jsx)("label",{htmlFor:"subCategoryImageInput",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[p?(0,s.jsx)("img",{src:p,alt:"Preview",className:"h-30 w-auto mb-2"}):(0,s.jsx)(x.A,{className:"h-10 w-10 text-gray-400 mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Drag and Drop an image here or ",(0,s.jsx)("span",{className:"text-blue-500",children:"Select file"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Formats Supported: PNG, JPG, JPEG"})]})})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex space-x-3",children:[(0,s.jsx)("button",{className:"flex-1 py-2 border border-gray-300 rounded-md text-gray-800 hover:bg-gray-50",onClick:e,disabled:j,children:"Cancel"}),(0,s.jsx)("button",{className:"flex-1 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",onClick:w,disabled:j,children:j?"Updating...":"Update Sub Category"})]})]})]})})})}function g(){let[e,t]=(0,r.useState)([]),[a,u]=(0,r.useState)([]),[x,g]=(0,r.useState)("all"),[p,h]=(0,r.useState)(""),[b,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[f,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),k=async()=>{try{C(!0);let e=l.$.getInstance(),[a,s]=await Promise.all([e.getAllCategories(),e.getAllSubCategories()]),r=s.map(e=>({...e,image_url:e.image_url||[],category_name:a.find(t=>t.id===e.category_id)?.name||""})),i=a.map(e=>({...e,count:s.filter(t=>t.category_id===e.id).length}));t(i),u(r)}catch(e){console.error("Failed to fetch data:",e)}finally{C(!1)}},S=async e=>{if(window.confirm("Are you sure you want to delete this subcategory?"))try{let t=l.$.getInstance();await t.deleteSubCategory(e),await k()}catch(e){console.error("Failed to delete subcategory:",e)}},A=e=>{N(e),v(!0)},_=a.filter(e=>{let t=e.name.toLowerCase().includes(p.toLowerCase()),a="all"===x||e.category_id===x;return t&&a}),P=t=>{let a=e.find(e=>e.id===t);return a?a.name:"Unknown category"};return(0,s.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-semibold text-gray-900",children:"Sub Categories"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your product sub-categories"})]}),(0,s.jsxs)("button",{onClick:()=>y(!0),className:"bg-orange-500 text-white px-5 py-2 rounded-lg flex items-center gap-2 hover:bg-orange-600 transition",children:[(0,s.jsx)(i.A,{size:18}),"Add Sub Category"]})]}),(0,s.jsx)("div",{className:"border-b mb-6",children:(0,s.jsxs)("div",{className:"flex space-x-6 overflow-x-auto pb-2",children:[(0,s.jsxs)("button",{className:`pb-2 px-1 font-medium text-sm whitespace-nowrap ${"all"===x?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-800"}`,onClick:()=>g("all"),children:["All ",(0,s.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-md",children:a.length})]},"all"),e.map(e=>(0,s.jsxs)("button",{className:`pb-2 px-1 font-medium text-sm whitespace-nowrap ${x===e.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-500 hover:text-gray-800"}`,onClick:()=>g(e.id),children:[e.name," ",(0,s.jsx)("span",{className:"ml-1 text-xs bg-gray-100 px-1.5 py-0.5 rounded-md",children:e.count})]},e.id))]})}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative max-w-md",children:[(0,s.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,s.jsx)("input",{type:"text",placeholder:"Search subcategories...",value:p,onChange:e=>h(e.target.value),className:"w-full pl-11 pr-4 py-2.5 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-orange-500 focus:outline-none transition placeholder-gray-400 text-gray-600"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[_.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition",children:[(0,s.jsx)("div",{className:"h-44 bg-white overflow-hidden flex justify-center items-center",children:(0,s.jsx)("img",{src:e.image_url[0]||"/placeholder.jpg",alt:e.name,className:"w-auto h-full object-fit"})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium text-gray-800",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:w?"Loading...":P(e.category_id)})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>A(e),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full",title:"Edit subcategory",children:(0,s.jsx)(d.A,{size:16})}),(0,s.jsx)("button",{onClick:()=>S(e.id),className:"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-full",title:"Delete subcategory",children:(0,s.jsx)(o.A,{size:16})})]})]})})]},e.id)),0===_.length&&(0,s.jsx)("div",{className:"col-span-full text-center py-20",children:(0,s.jsx)("p",{className:"text-gray-400 text-base",children:"No subcategories found."})})]}),b&&(0,s.jsx)(c.w,{onClose:()=>y(!1),reload:k}),j&&f&&(0,s.jsx)(m,{onClose:()=>{v(!1),N(null)},reload:k,subCategory:f})]})}},33873:e=>{"use strict";e.exports=require("path")},41217:(e,t,a)=>{Promise.resolve().then(a.bind(a,30662))},46055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},50446:(e,t,a)=>{Promise.resolve().then(a.bind(a,81376))},57175:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")},81376:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\chand\\\\OneDrive\\\\Desktop\\\\jeevic_admin\\\\app\\\\subcategory\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\subcategory\\page.tsx","default")},88233:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},96474:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},99270:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99951:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var s=a(65239),r=a(48088),l=a(88170),i=a.n(l),n=a(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o={children:["",{children:["subcategory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,81376)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\subcategory\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\subcategory\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/subcategory/page",pathname:"/subcategory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[447,661,658,286],()=>a(99951));module.exports=s})();