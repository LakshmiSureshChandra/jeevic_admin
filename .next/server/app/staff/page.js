(()=>{var e={};e.id=991,e.ids=[991],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3717:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=a(65239),r=a(48088),l=a(88170),n=a.n(l),i=a(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d={children:["",{children:["staff",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,82896)),"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\staff\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\staff\\page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/staff/page",pathname:"/staff",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22562:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(60687),r=a(43210),l=a(39192),n=a(63143),i=a(88233),o=a(47033),d=a(14952),c=a(78272),m=a(47601);let p=({onClose:e,onSubmit:t,initialData:a,isUpdate:l})=>{let[n,i]=(0,r.useState)({first_name:a?.first_name||"",last_name:a?.last_name||"",email:a?.email||"",country_code:a?.country_code||"+91",phone_number:a?.phone_number||"",role:a?.role||"cafe_admin",profile_picture:a?.profile_picture||"",created_at:a?.created_at||new Date,updated_at:a?.updated_at||new Date}),[o,d]=(0,r.useState)(null),[p,x]=(0,r.useState)(a?.profile_picture||"https://jeevic-prod.s3.ap-south-1.amazonaws.com/jv-uploads/1747773837875-Profile_avatar_placeholder_large.png"),[u,h]=(0,r.useState)(!0),y=(0,r.useRef)(null),g=async e=>{let t=e.target.files?.[0];if(t)try{let e=m.$.getInstance(),a=(await e.uploadFile(t)).url;x(a),i({...n,profile_picture:a}),h(!0)}catch(e){console.error("Error uploading image:",e)}};(0,r.useEffect)(()=>{function t(t){y.current&&!y.current.contains(t.target)&&e()}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[e]);let f=async s=>{s.preventDefault();let r=m.$.getInstance();try{l?await r.updateEmployee(a.id,{...n,profile_picture:p}):await r.createEmployee({...n,profile_picture:p}),t(n),e()}catch(e){console.error(`Failed to ${l?"update":"create"} employee:`,e)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{ref:y,className:"bg-white rounded-lg w-full max-w-md",children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("form",{onSubmit:f,children:[(0,s.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,s.jsx)("div",{className:"relative mb-2",children:(0,s.jsx)("img",{src:p||"/placeholder.svg",alt:"Employee",className:"w-24 h-24 rounded-full object-cover border"})}),(0,s.jsxs)("div",{className:"flex space-x-2 py-2",children:[(0,s.jsxs)("label",{className:"cursor-pointer text-sm bg-white border-2 border-gray-300 rounded-md px-2 py-1 text-black",children:["Upload Image",(0,s.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:g})]}),u&&(0,s.jsx)("button",{type:"button",className:"text-sm bg-red-100 rounded-md px-2 py-1 text-red-500",onClick:()=>{x("https://jeevic-prod.s3.ap-south-1.amazonaws.com/jv-uploads/1747773837875-Profile_avatar_placeholder_large.png"),h(!1)},children:"Delete Image"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"First Name"}),(0,s.jsx)("input",{type:"text",value:n.first_name,onChange:e=>i({...n,first_name:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Last Name"}),(0,s.jsx)("input",{type:"text",value:n.last_name,onChange:e=>i({...n,last_name:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Department"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:n.role,onChange:e=>i({...n,role:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800 appearance-none",required:!0,children:[(0,s.jsx)("option",{value:"Cafe_admin",children:"Cafe Admin"}),(0,s.jsx)("option",{value:"ecommerce_admin",children:"Ecommerce Staff"}),(0,s.jsx)("option",{value:"admin",children:"Super admin"})]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)(c.A,{className:"h-4 w-4 text-gray-500"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Email"}),(0,s.jsx)("input",{type:"email",value:n.email,onChange:e=>i({...n,email:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Employee Mobile"}),(0,s.jsx)("input",{type:"tel",value:n.phone_number,onChange:e=>i({...n,phone_number:e.target.value}),className:"w-full border rounded-md px-3 py-2 text-gray-800",required:!0})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full mt-6 py-3 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:l?"Update employee":"Create employee"})]})})})})};function x({employees:e,onUpdate:t,onDelete:a,search:l}){let[c,m]=(0,r.useState)(1),[x,u]=(0,r.useState)(null),[h,y]=(0,r.useState)(!1),g=e.filter(e=>e.first_name.toLowerCase().includes(l.toLowerCase())||e.last_name.toLowerCase().includes(l.toLowerCase())||e.email.toLowerCase().includes(l.toLowerCase())||e.phone_number.includes(l)||e.employeeid.includes(l)),f=10*c,v=f-10,b=g.slice(v,f),j=Math.ceil(g.length/10),w=e=>{window.confirm("Are you sure you want to delete this employee?")&&a(e)},N=e=>{u(e),y(!0)};return(0,s.jsxs)("div",{className:"bg-white border rounded-md overflow-hidden",children:[(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee email"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-10 w-10 flex-shrink-0 mr-3",children:(0,s.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.profile_picture||"https://i.pinimg.com/736x/62/7d/7a/627d7ac2d198b462f5a558ac49ecfc9f.jpg",alt:`${e.first_name} ${e.last_name}`})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:`${e.first_name} ${e.last_name}`}),(0,s.jsx)("div",{className:"text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded inline-block",children:e.role})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.employeeid}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone_number}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{className:"p-1.5 bg-orange-100 rounded-md text-orange-600 hover:bg-orange-200",onClick:()=>N(e),children:(0,s.jsx)(n.A,{size:16})}),(0,s.jsx)("button",{className:"p-1.5 bg-red-100 rounded-md text-red-600 hover:bg-red-200",onClick:()=>w(e.id),children:(0,s.jsx)(i.A,{size:16})})]})})]},t))})]}),(0,s.jsxs)("div",{className:"px-6 py-3 flex items-center justify-between border-t",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",v+1," to ",Math.min(f,b.length)," of ",b.length," Results"]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-700 mr-3",children:["Page ",c," of ",j]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:"px-2 py-1 border rounded-l-md bg-gray-100 text-gray-600",onClick:()=>{c>1&&m(c-1)},disabled:1===c,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsx)("button",{className:"px-2 py-1 border-t border-b border-r rounded-r-md bg-gray-100 text-gray-600",onClick:()=>{c<j&&m(c+1)},disabled:c===j,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})]})]})]}),h&&x&&(0,s.jsx)(p,{onClose:()=>y(!1),onSubmit:t,isUpdate:!!x,initialData:x})]})}var u=a(99270);function h(){let[e,t]=(0,r.useState)(""),[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)([]),d=async()=>{try{let e=m.$.getInstance(),t=await e.getEmployees();o(t.data)}catch(e){console.error("Failed to fetch employees:",e)}},c=async e=>{try{d(),console.log("Employee created/updated successfully")}catch(e){console.error("Failed to create/update employee:",e)}},h=async e=>{try{let t=m.$.getInstance();await t.deleteEmployee(e),d()}catch(e){console.error("Failed to fetch employees:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Q,{items:["Employee","Overview"]}),(0,s.jsx)("main",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"mt-8 border rounded-lg p-2",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800",children:"Employee Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Manage all the employees at one place"})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search with Employee Name or ID",className:"pl-10 pr-4 py-2 border rounded-md placeholder:text-gray-400 text-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 w-full",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]}),(0,s.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:"New Employee"})]}),(0,s.jsx)(x,{employees:i,onUpdate:c,onDelete:h,search:e})]})}),a&&(0,s.jsx)(p,{onClose:()=>n(!1),isUpdate:!1,initialData:{id:"",first_name:"",last_name:"",email:"",country_code:"+91",phone_number:"",role:"",profile_picture:""},onSubmit:c})]})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35400:(e,t,a)=>{Promise.resolve().then(a.bind(a,22562))},39192:(e,t,a)=>{"use strict";a.d(t,{Q:()=>i});var s=a(60687),r=a(85814),l=a.n(r),n=a(14952);function i({items:e}){return(0,s.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:e.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center",children:[a>0&&(0,s.jsx)(n.A,{size:16,className:"mx-2 text-black"}),(0,s.jsx)(l(),{href:"#",className:`${a===e.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"}`,children:t})]},a))})}},46055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},48552:(e,t,a)=>{Promise.resolve().then(a.bind(a,82896))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},78272:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},79551:e=>{"use strict";e.exports=require("url")},82896:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Charan Kosari\\\\Desktop\\\\jeevic_admin\\\\app\\\\staff\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Charan Kosari\\Desktop\\jeevic_admin\\app\\staff\\page.tsx","default")},88233:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},99270:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(62688).A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[447,273,658,506],()=>a(3717));module.exports=s})();