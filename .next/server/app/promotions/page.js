(()=>{var e={};e.id=337,e.ids=[337],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4536:(e,t,a)=>{let{createProxy:r}=a(39844);e.exports=r("C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\node_modules\\next\\dist\\client\\app-dir\\link.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13356:(e,t,a)=>{"use strict";a.d(t,{SalesManagement:()=>i});var r=a(60687),s=a(43210),n=a(47601),o=a(16023),d=a(35071);function l({sale:e,onClose:t,onSave:a}){let[l,i]=(0,s.useState)({...e,start_date:new Date(e.start_date).toISOString().split("T")[0],end_date:new Date(e.end_date).toISOString().split("T")[0]}),[c,p]=(0,s.useState)(e.image_url||[]),[u,m]=(0,s.useState)([]),[x,h]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),f=e=>{let{name:t,value:a}=e.target;i({...l,[t]:a})},y=async e=>{if(e.target.files){let t=n.$.getInstance();p([...c,...await Promise.all(Array.from(e.target.files).map(async e=>(await t.uploadFile(e)).url))])}},v=e=>{p(c.filter((t,a)=>a!==e))},j=(e,t)=>{i({...l,[e]:t})},w=async r=>{r.preventDefault();try{let r={...l,start_date:new Date(l.start_date),end_date:new Date(l.end_date),image_url:c,product_ids:l.product_ids,category_ids:l.category_ids,subcategory_ids:l.subcategory_ids,meta_data:JSON.parse(l.meta_data),created_at:e.created_at,updated_at:new Date};r.id?await n.$.getInstance().updateSale(r.id,r):await n.$.getInstance().createSale(r),a(),t()}catch(e){console.error("Failed to save sale:",e),alert("Invalid Meta Data JSON.")}};return(0,r.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 overflow-y-auto flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-white p-6 w-full max-w-lg rounded-xl shadow-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:l.id?"Edit Sale":"Create Sale"}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[["name","description"].map(e=>(0,r.jsx)("input",{type:"text",name:e,value:l[e],onChange:f,placeholder:e.charAt(0).toUpperCase()+e.slice(1),className:"w-full p-2 border rounded-md",required:"name"===e},e)),(0,r.jsx)("input",{type:"number",name:"discount_percentage",value:l.discount_percentage,onChange:f,placeholder:"Discount (%)",className:"w-full p-2 border rounded-md",required:!0}),["start_date","end_date"].map(e=>(0,r.jsx)("input",{type:"date",name:e,value:l[e],onChange:f,className:"w-full p-2 border rounded-md",required:!0},e)),(0,r.jsxs)("select",{name:"sale_type",value:l.sale_type,onChange:f,className:"w-full p-2 border rounded-md",children:[(0,r.jsx)("option",{value:"product",children:"Product"}),(0,r.jsx)("option",{value:"category",children:"Category"}),(0,r.jsx)("option",{value:"subcategory",children:"Subcategory"})]}),[{label:"Categories",name:"category_ids",data:u},{label:"Products",name:"product_ids",data:x},{label:"Subcategories",name:"subcategory_ids",data:g}].map(({label:e,name:t,data:a})=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium mb-1",children:e}),(0,r.jsx)("select",{multiple:!0,value:l[t],onChange:e=>j(t,Array.from(e.target.selectedOptions,e=>e.value)),className:"w-full p-2 border rounded-md",children:a.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})]},t)),(0,r.jsx)("textarea",{name:"meta_data",value:JSON.stringify(l.meta_data,null,2),onChange:f,rows:5,className:"w-full p-2 border rounded-md font-mono"}),(0,r.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:[(0,r.jsx)("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",multiple:!0,onChange:y,className:"hidden",id:"imageUpload"}),(0,r.jsxs)("label",{htmlFor:"imageUpload",className:"cursor-pointer text-gray-600 flex flex-col items-center",children:[(0,r.jsx)(o.A,{className:"h-8 w-8 mb-1"}),(0,r.jsx)("span",{children:"Select images"})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"relative w-16 h-16 border rounded overflow-hidden",children:[(0,r.jsx)("img",{src:e,className:"w-full h-full object-cover",alt:"Sale"}),(0,r.jsx)("button",{type:"button",onClick:()=>v(t),className:"absolute top-0 right-0 bg-white rounded-full",children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-red-500"})})]},t))}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded-md",children:"Save"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Cancel"})]})]})]})})}function i(){let[e,t]=(0,s.useState)([]),[a,o]=(0,s.useState)(null),d={id:"",name:"",image_url:[],description:"",start_date:new Date,end_date:new Date,discount_percentage:0,sale_type:"product",product_ids:[],category_ids:[],subcategory_ids:[],meta_data:{},created_at:new Date,updated_at:new Date},i=async()=>{try{let e=await n.$.getInstance().getSales();t(e)}catch(e){console.error("Failed to load sales:",e)}},c=async e=>{if(window.confirm("Are you sure you want to delete this sale?"))try{await n.$.getInstance().deleteSale(e),i()}catch(e){console.error("Failed to delete sale:",e)}};return(0,r.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f9f9f9"},children:[(0,r.jsx)("button",{style:{backgroundColor:"#4CAF50",color:"white",padding:"10px 20px",marginBottom:"20px",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:()=>o(d),children:"Create New Sale"}),(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#f2f2f2"},children:[(0,r.jsx)("th",{style:{padding:"10px",borderBottom:"1px solid #ddd",color:"black"},children:"Name"}),(0,r.jsx)("th",{style:{padding:"10px",borderBottom:"1px solid #ddd",color:"black"},children:"Start Date"}),(0,r.jsx)("th",{style:{padding:"10px",borderBottom:"1px solid #ddd",color:"black"},children:"End Date"}),(0,r.jsx)("th",{style:{padding:"10px",borderBottom:"1px solid #ddd",color:"black"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:e.name}),(0,r.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:new Date(e.start_date).toLocaleDateString()}),(0,r.jsx)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:new Date(e.end_date).toLocaleDateString()}),(0,r.jsxs)("td",{style:{padding:"10px",borderBottom:"1px solid #ddd"},children:[(0,r.jsx)("button",{style:{backgroundColor:"#008CBA",color:"white",padding:"5px 10px",marginRight:"5px",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:()=>o(e),children:"Edit"}),(0,r.jsx)("button",{style:{backgroundColor:"#f44336",color:"white",padding:"5px 10px",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:()=>c(e.id),children:"Delete"})]})]},e.id))})]}),a&&(0,r.jsx)(l,{sale:a,onClose:()=>o(null),onSave:i})]})}},16023:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35071:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(62688).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},46055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},49622:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(37413),s=a(89391),n=a(81312);function o(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Q,{items:["Convenience","Promotions & Sales"]}),(0,r.jsxs)("main",{className:"flex-1 p-6",children:[(0,r.jsx)("h1",{className:"text-2xl text-black font-bold",children:"Promotions & Sales Page"}),(0,r.jsx)(n.SalesManagement,{})]})]})}},53890:(e,t,a)=>{Promise.resolve().then(a.bind(a,81312)),Promise.resolve().then(a.t.bind(a,4536,23))},57443:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>i});var r=a(65239),s=a(48088),n=a(88170),o=a.n(n),d=a(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);a.d(t,l);let i={children:["",{children:["promotions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,49622)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\promotions\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\app\\promotions\\page.tsx"],p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/promotions/page",pathname:"/promotions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72042:(e,t,a)=>{Promise.resolve().then(a.bind(a,13356)),Promise.resolve().then(a.t.bind(a,85814,23))},79551:e=>{"use strict";e.exports=require("url")},81312:(e,t,a)=>{"use strict";a.d(t,{SalesManagement:()=>r});let r=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call SalesManagement() from the server but SalesManagement is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\chand\\OneDrive\\Desktop\\jeevic_admin\\components\\promotions\\sales-management.tsx","SalesManagement")},89391:(e,t,a)=>{"use strict";a.d(t,{Q:()=>x});var r=a(37413),s=a(4536),n=a.n(s),o=a(61120);let d=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:s="",children:n,iconNode:d,...l},i)=>(0,o.createElement)("svg",{ref:i,...p,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:c("lucide",s),...l},[...d.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(n)?n:[n]])),m=((e,t)=>{let a=(0,o.forwardRef)(({className:a,...r},s)=>(0,o.createElement)(u,{ref:s,iconNode:t,className:c(`lucide-${d(i(e))}`,`lucide-${e}`,a),...r}));return a.displayName=i(e),a})("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function x({items:e}){return(0,r.jsx)("div",{className:"px-6 pt-3 flex items-center text-sm",children:e.map((t,a)=>(0,r.jsxs)("div",{className:"flex items-center",children:[a>0&&(0,r.jsx)(m,{size:16,className:"mx-2 text-black"}),(0,r.jsx)(n(),{href:"#",className:`${a===e.length-1?"text-gray-800 font-medium":"text-black hover:text-gray-700"}`,children:t})]},a))})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[447,661,658,286],()=>a(57443));module.exports=r})();